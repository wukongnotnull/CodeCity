<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关系型数据库MySQL | 悟空非空也</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="集成计算机编程技术博客、知识库、学习笔记文档、技术网站导航、资源收藏、技术电子书、论坛于一体。涵盖JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github，Java,C,C++,Php,大数据，人工智能，云计算，机器深度学习和算法等技术文章和资源。">
    <meta name="keywords" content="集成计算机编程技术博客、知识库、学习笔记文档、技术网站导航、资源收藏、技术电子书、论坛于一体。涵盖JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github，Java,C,C++,Php,大数据，人工智能，云计算，机器深度学习和算法等技术文章和资源。">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.4a9c0c84.css" as="style"><link rel="preload" href="/assets/js/app.0772105c.js" as="script"><link rel="preload" href="/assets/js/2.6497fd29.js" as="script"><link rel="preload" href="/assets/js/154.d0b70cd8.js" as="script"><link rel="prefetch" href="/assets/js/10.0a7a5c2a.js"><link rel="prefetch" href="/assets/js/100.6dd9a587.js"><link rel="prefetch" href="/assets/js/101.b1cb7166.js"><link rel="prefetch" href="/assets/js/102.6a888436.js"><link rel="prefetch" href="/assets/js/103.075294d1.js"><link rel="prefetch" href="/assets/js/104.7f9d5a4c.js"><link rel="prefetch" href="/assets/js/105.bcc3dd3e.js"><link rel="prefetch" href="/assets/js/106.9cadb287.js"><link rel="prefetch" href="/assets/js/107.1d6b3af1.js"><link rel="prefetch" href="/assets/js/108.7377cb7f.js"><link rel="prefetch" href="/assets/js/109.ca3ceab0.js"><link rel="prefetch" href="/assets/js/11.961408a3.js"><link rel="prefetch" href="/assets/js/110.79c5c987.js"><link rel="prefetch" href="/assets/js/111.63b3d196.js"><link rel="prefetch" href="/assets/js/112.ced4f0e9.js"><link rel="prefetch" href="/assets/js/113.657daa4e.js"><link rel="prefetch" href="/assets/js/114.e5d0a86b.js"><link rel="prefetch" href="/assets/js/115.a89005f0.js"><link rel="prefetch" href="/assets/js/116.bcbccecc.js"><link rel="prefetch" href="/assets/js/117.7acf9f16.js"><link rel="prefetch" href="/assets/js/118.75e4e713.js"><link rel="prefetch" href="/assets/js/119.0395ec5d.js"><link rel="prefetch" href="/assets/js/12.aab67183.js"><link rel="prefetch" href="/assets/js/120.93179733.js"><link rel="prefetch" href="/assets/js/121.e80fc142.js"><link rel="prefetch" href="/assets/js/122.41a175f0.js"><link rel="prefetch" href="/assets/js/123.028fd9cd.js"><link rel="prefetch" href="/assets/js/124.100b1fb0.js"><link rel="prefetch" href="/assets/js/125.13d51556.js"><link rel="prefetch" href="/assets/js/126.02c987a2.js"><link rel="prefetch" href="/assets/js/127.f7e115fe.js"><link rel="prefetch" href="/assets/js/128.eb930737.js"><link rel="prefetch" href="/assets/js/129.29fef1d1.js"><link rel="prefetch" href="/assets/js/13.7dd23d29.js"><link rel="prefetch" href="/assets/js/130.7e4c3bbc.js"><link rel="prefetch" href="/assets/js/131.16f04a03.js"><link rel="prefetch" href="/assets/js/132.c811b5cf.js"><link rel="prefetch" href="/assets/js/133.4a0d2ee8.js"><link rel="prefetch" href="/assets/js/134.aa288243.js"><link rel="prefetch" href="/assets/js/135.7d74b67e.js"><link rel="prefetch" href="/assets/js/136.f6a4d7dc.js"><link rel="prefetch" href="/assets/js/137.4a8c94fa.js"><link rel="prefetch" href="/assets/js/138.30103e18.js"><link rel="prefetch" href="/assets/js/139.cb62e822.js"><link rel="prefetch" href="/assets/js/14.7a045a57.js"><link rel="prefetch" href="/assets/js/140.4849d011.js"><link rel="prefetch" href="/assets/js/141.b53f0217.js"><link rel="prefetch" href="/assets/js/142.d2e12f6f.js"><link rel="prefetch" href="/assets/js/143.41effcfd.js"><link rel="prefetch" href="/assets/js/144.5ed3025f.js"><link rel="prefetch" href="/assets/js/145.ec71ac40.js"><link rel="prefetch" href="/assets/js/146.dc482dc8.js"><link rel="prefetch" href="/assets/js/147.f43c3786.js"><link rel="prefetch" href="/assets/js/148.e60884a5.js"><link rel="prefetch" href="/assets/js/149.fd305860.js"><link rel="prefetch" href="/assets/js/15.b07b6e42.js"><link rel="prefetch" href="/assets/js/150.e294561d.js"><link rel="prefetch" href="/assets/js/151.5cda3c43.js"><link rel="prefetch" href="/assets/js/152.ec1bec3f.js"><link rel="prefetch" href="/assets/js/153.411bc769.js"><link rel="prefetch" href="/assets/js/155.8013985e.js"><link rel="prefetch" href="/assets/js/156.9e9c91f4.js"><link rel="prefetch" href="/assets/js/157.0273d672.js"><link rel="prefetch" href="/assets/js/158.2612db04.js"><link rel="prefetch" href="/assets/js/159.9942bd3a.js"><link rel="prefetch" href="/assets/js/16.511be8ae.js"><link rel="prefetch" href="/assets/js/160.69e027a9.js"><link rel="prefetch" href="/assets/js/161.3d0255ab.js"><link rel="prefetch" href="/assets/js/162.4f223488.js"><link rel="prefetch" href="/assets/js/163.aca282a2.js"><link rel="prefetch" href="/assets/js/164.68c99b46.js"><link rel="prefetch" href="/assets/js/165.f455fb7b.js"><link rel="prefetch" href="/assets/js/166.a4d94e8d.js"><link rel="prefetch" href="/assets/js/167.dad8c77e.js"><link rel="prefetch" href="/assets/js/168.cb0717be.js"><link rel="prefetch" href="/assets/js/169.61a9bd6a.js"><link rel="prefetch" href="/assets/js/17.bbcfeede.js"><link rel="prefetch" href="/assets/js/170.f3785783.js"><link rel="prefetch" href="/assets/js/171.238d90d3.js"><link rel="prefetch" href="/assets/js/172.63852414.js"><link rel="prefetch" href="/assets/js/173.613fce9e.js"><link rel="prefetch" href="/assets/js/174.761ee99c.js"><link rel="prefetch" href="/assets/js/175.f2953a9b.js"><link rel="prefetch" href="/assets/js/176.415405fd.js"><link rel="prefetch" href="/assets/js/177.5c3782be.js"><link rel="prefetch" href="/assets/js/178.7c081109.js"><link rel="prefetch" href="/assets/js/179.038faa2b.js"><link rel="prefetch" href="/assets/js/18.c6108eaa.js"><link rel="prefetch" href="/assets/js/180.f498ca2e.js"><link rel="prefetch" href="/assets/js/181.ec14688f.js"><link rel="prefetch" href="/assets/js/182.1279a689.js"><link rel="prefetch" href="/assets/js/183.ced575fe.js"><link rel="prefetch" href="/assets/js/184.34f3c06c.js"><link rel="prefetch" href="/assets/js/185.b3d1acb8.js"><link rel="prefetch" href="/assets/js/186.b6efd99e.js"><link rel="prefetch" href="/assets/js/187.9b3f72f6.js"><link rel="prefetch" href="/assets/js/188.2e66f79c.js"><link rel="prefetch" href="/assets/js/189.4d12400d.js"><link rel="prefetch" href="/assets/js/19.192ec262.js"><link rel="prefetch" href="/assets/js/190.e353d2e5.js"><link rel="prefetch" href="/assets/js/191.7d655069.js"><link rel="prefetch" href="/assets/js/192.c33b286e.js"><link rel="prefetch" href="/assets/js/193.c9f461d3.js"><link rel="prefetch" href="/assets/js/194.32fdc071.js"><link rel="prefetch" href="/assets/js/195.03c708fc.js"><link rel="prefetch" href="/assets/js/196.54c890cf.js"><link rel="prefetch" href="/assets/js/197.68d0761d.js"><link rel="prefetch" href="/assets/js/198.efdf4f70.js"><link rel="prefetch" href="/assets/js/199.abaad0a6.js"><link rel="prefetch" href="/assets/js/20.d04c28bc.js"><link rel="prefetch" href="/assets/js/200.bd80bb59.js"><link rel="prefetch" href="/assets/js/201.4316ce7c.js"><link rel="prefetch" href="/assets/js/202.182fb8ad.js"><link rel="prefetch" href="/assets/js/203.7c514243.js"><link rel="prefetch" href="/assets/js/204.622bbe90.js"><link rel="prefetch" href="/assets/js/205.28f69f06.js"><link rel="prefetch" href="/assets/js/206.0c4c24eb.js"><link rel="prefetch" href="/assets/js/207.ea976c79.js"><link rel="prefetch" href="/assets/js/208.c4f49e55.js"><link rel="prefetch" href="/assets/js/209.4e2dacde.js"><link rel="prefetch" href="/assets/js/21.d8b6c127.js"><link rel="prefetch" href="/assets/js/210.c5ddee43.js"><link rel="prefetch" href="/assets/js/211.2db8e6bf.js"><link rel="prefetch" href="/assets/js/212.9e5c2afe.js"><link rel="prefetch" href="/assets/js/213.9fc56fcc.js"><link rel="prefetch" href="/assets/js/214.b22b8fd0.js"><link rel="prefetch" href="/assets/js/215.b714511d.js"><link rel="prefetch" href="/assets/js/216.4045669d.js"><link rel="prefetch" href="/assets/js/217.b8bfc481.js"><link rel="prefetch" href="/assets/js/218.4cc6231a.js"><link rel="prefetch" href="/assets/js/219.b04f0864.js"><link rel="prefetch" href="/assets/js/22.a21d9c67.js"><link rel="prefetch" href="/assets/js/220.5c5efc16.js"><link rel="prefetch" href="/assets/js/221.b3cc4226.js"><link rel="prefetch" href="/assets/js/222.14568620.js"><link rel="prefetch" href="/assets/js/223.5ad9c326.js"><link rel="prefetch" href="/assets/js/224.bef27670.js"><link rel="prefetch" href="/assets/js/225.7e76ba96.js"><link rel="prefetch" href="/assets/js/226.c892c0a5.js"><link rel="prefetch" href="/assets/js/227.1a5c5dfe.js"><link rel="prefetch" href="/assets/js/228.a83d26e3.js"><link rel="prefetch" href="/assets/js/229.f69558a4.js"><link rel="prefetch" href="/assets/js/23.e6bed599.js"><link rel="prefetch" href="/assets/js/230.975e6807.js"><link rel="prefetch" href="/assets/js/231.3323c121.js"><link rel="prefetch" href="/assets/js/232.69b5135e.js"><link rel="prefetch" href="/assets/js/233.f27782e6.js"><link rel="prefetch" href="/assets/js/234.c1e937f3.js"><link rel="prefetch" href="/assets/js/235.500694bc.js"><link rel="prefetch" href="/assets/js/236.6b6f2f84.js"><link rel="prefetch" href="/assets/js/237.a529e2ba.js"><link rel="prefetch" href="/assets/js/238.d5bca3eb.js"><link rel="prefetch" href="/assets/js/239.0b79bd7b.js"><link rel="prefetch" href="/assets/js/24.1be4b8e9.js"><link rel="prefetch" href="/assets/js/240.baec5139.js"><link rel="prefetch" href="/assets/js/241.eef96f93.js"><link rel="prefetch" href="/assets/js/242.8208455c.js"><link rel="prefetch" href="/assets/js/243.4c8fdc98.js"><link rel="prefetch" href="/assets/js/244.e11ee13c.js"><link rel="prefetch" href="/assets/js/245.b1e7beba.js"><link rel="prefetch" href="/assets/js/246.4c24ee87.js"><link rel="prefetch" href="/assets/js/247.f3958ef5.js"><link rel="prefetch" href="/assets/js/248.3f533151.js"><link rel="prefetch" href="/assets/js/249.6d80f1cd.js"><link rel="prefetch" href="/assets/js/25.7420391b.js"><link rel="prefetch" href="/assets/js/250.2faf865a.js"><link rel="prefetch" href="/assets/js/251.88d81ef7.js"><link rel="prefetch" href="/assets/js/252.04a6a69c.js"><link rel="prefetch" href="/assets/js/253.32528c6e.js"><link rel="prefetch" href="/assets/js/254.312c70ad.js"><link rel="prefetch" href="/assets/js/255.ff88a488.js"><link rel="prefetch" href="/assets/js/256.8b782088.js"><link rel="prefetch" href="/assets/js/257.1e04db72.js"><link rel="prefetch" href="/assets/js/258.6b8e65a8.js"><link rel="prefetch" href="/assets/js/259.c1a78951.js"><link rel="prefetch" href="/assets/js/26.b979a08f.js"><link rel="prefetch" href="/assets/js/260.2910b3b5.js"><link rel="prefetch" href="/assets/js/261.b3c9ff4f.js"><link rel="prefetch" href="/assets/js/262.a4846d38.js"><link rel="prefetch" href="/assets/js/263.2fe51a99.js"><link rel="prefetch" href="/assets/js/264.790ac186.js"><link rel="prefetch" href="/assets/js/265.2da80512.js"><link rel="prefetch" href="/assets/js/266.86531545.js"><link rel="prefetch" href="/assets/js/267.2d8df6ee.js"><link rel="prefetch" href="/assets/js/268.caf4f057.js"><link rel="prefetch" href="/assets/js/269.5cb1755d.js"><link rel="prefetch" href="/assets/js/27.46acb058.js"><link rel="prefetch" href="/assets/js/270.93b039ff.js"><link rel="prefetch" href="/assets/js/271.a83d9432.js"><link rel="prefetch" href="/assets/js/272.f957cb9b.js"><link rel="prefetch" href="/assets/js/273.00fda4c5.js"><link rel="prefetch" href="/assets/js/274.90d11b33.js"><link rel="prefetch" href="/assets/js/275.a5ab6a4b.js"><link rel="prefetch" href="/assets/js/276.e1553171.js"><link rel="prefetch" href="/assets/js/277.fc579c76.js"><link rel="prefetch" href="/assets/js/278.eecaef76.js"><link rel="prefetch" href="/assets/js/279.4ccbe5fd.js"><link rel="prefetch" href="/assets/js/28.d679a88b.js"><link rel="prefetch" href="/assets/js/280.1a2df8d1.js"><link rel="prefetch" href="/assets/js/281.4d879315.js"><link rel="prefetch" href="/assets/js/282.1a638b6e.js"><link rel="prefetch" href="/assets/js/283.35d77274.js"><link rel="prefetch" href="/assets/js/284.236f6c0d.js"><link rel="prefetch" href="/assets/js/285.f911dc9c.js"><link rel="prefetch" href="/assets/js/286.f2032fe0.js"><link rel="prefetch" href="/assets/js/287.47be0dd9.js"><link rel="prefetch" href="/assets/js/288.805d6e1e.js"><link rel="prefetch" href="/assets/js/289.af37d311.js"><link rel="prefetch" href="/assets/js/29.9fb32fde.js"><link rel="prefetch" href="/assets/js/290.cc34cbe3.js"><link rel="prefetch" href="/assets/js/291.887bcdbb.js"><link rel="prefetch" href="/assets/js/292.88848329.js"><link rel="prefetch" href="/assets/js/293.c5e4486a.js"><link rel="prefetch" href="/assets/js/294.4cc2aedf.js"><link rel="prefetch" href="/assets/js/295.1072aab8.js"><link rel="prefetch" href="/assets/js/296.1b0b3008.js"><link rel="prefetch" href="/assets/js/297.0f879887.js"><link rel="prefetch" href="/assets/js/298.516a7d92.js"><link rel="prefetch" href="/assets/js/299.a039e1fa.js"><link rel="prefetch" href="/assets/js/3.8f0b1c2b.js"><link rel="prefetch" href="/assets/js/30.49c708c9.js"><link rel="prefetch" href="/assets/js/300.d7f284d1.js"><link rel="prefetch" href="/assets/js/301.d0b1dd6f.js"><link rel="prefetch" href="/assets/js/302.4b55dd23.js"><link rel="prefetch" href="/assets/js/303.feb01496.js"><link rel="prefetch" href="/assets/js/304.3ab97c4d.js"><link rel="prefetch" href="/assets/js/305.591a1558.js"><link rel="prefetch" href="/assets/js/306.adb43a3c.js"><link rel="prefetch" href="/assets/js/307.b05d288b.js"><link rel="prefetch" href="/assets/js/308.4567d4af.js"><link rel="prefetch" href="/assets/js/309.72c51c16.js"><link rel="prefetch" href="/assets/js/31.11f8cedc.js"><link rel="prefetch" href="/assets/js/310.3962fc11.js"><link rel="prefetch" href="/assets/js/311.75aa7b05.js"><link rel="prefetch" href="/assets/js/312.9ec9fde7.js"><link rel="prefetch" href="/assets/js/313.d6f6baa3.js"><link rel="prefetch" href="/assets/js/314.86cdfa89.js"><link rel="prefetch" href="/assets/js/315.25959c53.js"><link rel="prefetch" href="/assets/js/316.8fa91955.js"><link rel="prefetch" href="/assets/js/317.4248ad4c.js"><link rel="prefetch" href="/assets/js/318.3f9ca0c5.js"><link rel="prefetch" href="/assets/js/319.32be3008.js"><link rel="prefetch" href="/assets/js/32.4e2e98b3.js"><link rel="prefetch" href="/assets/js/320.b8a7b72b.js"><link rel="prefetch" href="/assets/js/321.a3f7c1a6.js"><link rel="prefetch" href="/assets/js/322.d0903e0c.js"><link rel="prefetch" href="/assets/js/323.99520c43.js"><link rel="prefetch" href="/assets/js/324.333a4f10.js"><link rel="prefetch" href="/assets/js/325.e502b8f9.js"><link rel="prefetch" href="/assets/js/326.8e57faf4.js"><link rel="prefetch" href="/assets/js/327.f0473fc3.js"><link rel="prefetch" href="/assets/js/328.eaa4bf5f.js"><link rel="prefetch" href="/assets/js/329.dc0763f7.js"><link rel="prefetch" href="/assets/js/33.90114516.js"><link rel="prefetch" href="/assets/js/330.1f60cb6e.js"><link rel="prefetch" href="/assets/js/331.4af5e363.js"><link rel="prefetch" href="/assets/js/332.2a2023db.js"><link rel="prefetch" href="/assets/js/333.4c5db27a.js"><link rel="prefetch" href="/assets/js/334.f52a66e5.js"><link rel="prefetch" href="/assets/js/335.a6481538.js"><link rel="prefetch" href="/assets/js/336.6bd556c7.js"><link rel="prefetch" href="/assets/js/337.58a4d668.js"><link rel="prefetch" href="/assets/js/338.22095960.js"><link rel="prefetch" href="/assets/js/339.c8da6647.js"><link rel="prefetch" href="/assets/js/34.225b456c.js"><link rel="prefetch" href="/assets/js/340.9f93002f.js"><link rel="prefetch" href="/assets/js/341.721ab41d.js"><link rel="prefetch" href="/assets/js/342.f129aa89.js"><link rel="prefetch" href="/assets/js/343.ea2d2309.js"><link rel="prefetch" href="/assets/js/344.15235001.js"><link rel="prefetch" href="/assets/js/345.eaaae5e5.js"><link rel="prefetch" href="/assets/js/346.73b19ced.js"><link rel="prefetch" href="/assets/js/347.6e11bced.js"><link rel="prefetch" href="/assets/js/348.3b9b7968.js"><link rel="prefetch" href="/assets/js/349.b60a2b56.js"><link rel="prefetch" href="/assets/js/35.e3ec78ba.js"><link rel="prefetch" href="/assets/js/350.e793c7b9.js"><link rel="prefetch" href="/assets/js/351.c86b1ea0.js"><link rel="prefetch" href="/assets/js/352.770038d5.js"><link rel="prefetch" href="/assets/js/353.fe8f38a5.js"><link rel="prefetch" href="/assets/js/354.d3bbf169.js"><link rel="prefetch" href="/assets/js/355.5bb68a7e.js"><link rel="prefetch" href="/assets/js/356.b380aecd.js"><link rel="prefetch" href="/assets/js/357.24fbf1ff.js"><link rel="prefetch" href="/assets/js/358.669b8aba.js"><link rel="prefetch" href="/assets/js/359.04af7f75.js"><link rel="prefetch" href="/assets/js/36.dedb6e42.js"><link rel="prefetch" href="/assets/js/360.73d170d7.js"><link rel="prefetch" href="/assets/js/361.c1f55230.js"><link rel="prefetch" href="/assets/js/362.967bb47e.js"><link rel="prefetch" href="/assets/js/363.7b39c192.js"><link rel="prefetch" href="/assets/js/364.7dbf94dd.js"><link rel="prefetch" href="/assets/js/365.8a1d46d7.js"><link rel="prefetch" href="/assets/js/366.997ec05e.js"><link rel="prefetch" href="/assets/js/367.cda39f93.js"><link rel="prefetch" href="/assets/js/368.1159aebc.js"><link rel="prefetch" href="/assets/js/369.8371cbf0.js"><link rel="prefetch" href="/assets/js/37.129a1339.js"><link rel="prefetch" href="/assets/js/370.b5bda99f.js"><link rel="prefetch" href="/assets/js/371.ca4c4c31.js"><link rel="prefetch" href="/assets/js/372.6ecb7277.js"><link rel="prefetch" href="/assets/js/373.d3d1f018.js"><link rel="prefetch" href="/assets/js/374.4901bb51.js"><link rel="prefetch" href="/assets/js/375.ab11fdff.js"><link rel="prefetch" href="/assets/js/376.f34fed60.js"><link rel="prefetch" href="/assets/js/377.8d8aa0d5.js"><link rel="prefetch" href="/assets/js/378.16a432ff.js"><link rel="prefetch" href="/assets/js/379.68163d64.js"><link rel="prefetch" href="/assets/js/38.e0e2c3b1.js"><link rel="prefetch" href="/assets/js/39.a33bdbc2.js"><link rel="prefetch" href="/assets/js/4.d96ebf17.js"><link rel="prefetch" href="/assets/js/40.d20c1395.js"><link rel="prefetch" href="/assets/js/41.a2d6458f.js"><link rel="prefetch" href="/assets/js/42.48c0ea87.js"><link rel="prefetch" href="/assets/js/43.e2e765f4.js"><link rel="prefetch" href="/assets/js/44.10b67e66.js"><link rel="prefetch" href="/assets/js/45.2cd4b906.js"><link rel="prefetch" href="/assets/js/46.7a02c8ab.js"><link rel="prefetch" href="/assets/js/47.d88632c9.js"><link rel="prefetch" href="/assets/js/48.ade443fe.js"><link rel="prefetch" href="/assets/js/49.4d2ddb3b.js"><link rel="prefetch" href="/assets/js/5.037e08ba.js"><link rel="prefetch" href="/assets/js/50.463230b1.js"><link rel="prefetch" href="/assets/js/51.83c9a564.js"><link rel="prefetch" href="/assets/js/52.56c5a325.js"><link rel="prefetch" href="/assets/js/53.72a3b829.js"><link rel="prefetch" href="/assets/js/54.8f59548e.js"><link rel="prefetch" href="/assets/js/55.0faca6a3.js"><link rel="prefetch" href="/assets/js/56.77474658.js"><link rel="prefetch" href="/assets/js/57.4e4789fa.js"><link rel="prefetch" href="/assets/js/58.9dc82ebc.js"><link rel="prefetch" href="/assets/js/59.2147b861.js"><link rel="prefetch" href="/assets/js/6.8af55c48.js"><link rel="prefetch" href="/assets/js/60.d0ff683a.js"><link rel="prefetch" href="/assets/js/61.331527c3.js"><link rel="prefetch" href="/assets/js/62.a9085bf0.js"><link rel="prefetch" href="/assets/js/63.ecaf766f.js"><link rel="prefetch" href="/assets/js/64.f9a1f00a.js"><link rel="prefetch" href="/assets/js/65.69eef128.js"><link rel="prefetch" href="/assets/js/66.7ce420d5.js"><link rel="prefetch" href="/assets/js/67.059927af.js"><link rel="prefetch" href="/assets/js/68.d1e1fb62.js"><link rel="prefetch" href="/assets/js/69.a98be775.js"><link rel="prefetch" href="/assets/js/7.330a4708.js"><link rel="prefetch" href="/assets/js/70.c773f1fb.js"><link rel="prefetch" href="/assets/js/71.23db970d.js"><link rel="prefetch" href="/assets/js/72.3f45b262.js"><link rel="prefetch" href="/assets/js/73.cc16dadf.js"><link rel="prefetch" href="/assets/js/74.1f05b2b1.js"><link rel="prefetch" href="/assets/js/75.3cd7d993.js"><link rel="prefetch" href="/assets/js/76.1e78e542.js"><link rel="prefetch" href="/assets/js/77.d97d60f9.js"><link rel="prefetch" href="/assets/js/78.6997cb3a.js"><link rel="prefetch" href="/assets/js/79.e8ef607f.js"><link rel="prefetch" href="/assets/js/8.cca0e264.js"><link rel="prefetch" href="/assets/js/80.57d72889.js"><link rel="prefetch" href="/assets/js/81.7aee8496.js"><link rel="prefetch" href="/assets/js/82.0b920de1.js"><link rel="prefetch" href="/assets/js/83.429d7e6f.js"><link rel="prefetch" href="/assets/js/84.c74f1357.js"><link rel="prefetch" href="/assets/js/85.71d21661.js"><link rel="prefetch" href="/assets/js/86.d55ba6f0.js"><link rel="prefetch" href="/assets/js/87.6566a5fc.js"><link rel="prefetch" href="/assets/js/88.6cfa26b6.js"><link rel="prefetch" href="/assets/js/89.0a9ed463.js"><link rel="prefetch" href="/assets/js/9.ef46dc1c.js"><link rel="prefetch" href="/assets/js/90.507b8bb7.js"><link rel="prefetch" href="/assets/js/91.0c374e4a.js"><link rel="prefetch" href="/assets/js/92.1f6e9c9d.js"><link rel="prefetch" href="/assets/js/93.33a64374.js"><link rel="prefetch" href="/assets/js/94.68d20253.js"><link rel="prefetch" href="/assets/js/95.2cf46b84.js"><link rel="prefetch" href="/assets/js/96.9b292e88.js"><link rel="prefetch" href="/assets/js/97.1575dbac.js"><link rel="prefetch" href="/assets/js/98.b8682f4a.js"><link rel="prefetch" href="/assets/js/99.0039b460.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4a9c0c84.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/favicon.ico" alt="悟空非空也" class="logo"> <span class="site-name can-hide">悟空非空也</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><a href="/blogs/" class="link-title">博客</a> <span class="title" style="display:none;">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/WuKongNotNull/awesome-free-vpn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  科学上网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/categories/?category=%E5%A5%BD%E7%89%A9%E6%8E%A8%E8%8D%90%E5%AE%98&amp;.html" class="nav-link">好物推荐官</a></li><li class="dropdown-item"><!----> <a href="/categories/?category=%E9%9A%8F%E7%AC%94&amp;.html" class="nav-link">随笔感悟</a></li></ul></div></div><div class="nav-item"><a href="/pages/3ad3de/" class="nav-link">编程导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/javase/" class="nav-link">JavaSE</a></li><li class="dropdown-item"><!----> <a href="/java/javaee/" class="nav-link">JavaEE</a></li><li class="dropdown-item"><!----> <a href="/java/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/java/mybatis/" class="nav-link">MyBatis</a></li><li class="dropdown-item"><!----> <a href="/java/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/java/springcloud/" class="nav-link">SpringCloud</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/tutorial/" class="nav-link">Python教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大前端" class="dropdown-title"><a href="/fore/" class="link-title">大前端</a> <span class="title" style="display:none;">大前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fore/javascript/" class="nav-link">JavaScript基础教程</a></li><li class="dropdown-item"><!----> <a href="/fore/js/" class="nav-link">JavaScript高级程序设计</a></li><li class="dropdown-item"><!----> <a href="/fore/es6/" class="nav-link">ES6 教程</a></li><li class="dropdown-item"><!----> <a href="/fore/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/fore/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/fore/typescript-axios/" class="nav-link">TypeScript 从零实现 axios</a></li><li class="dropdown-item"><!----> <a href="/fore/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/interview/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/c/" class="nav-link">C开发岗</a></li><li class="dropdown-item"><!----> <a href="/interview/java/" class="nav-link">Java开发岗</a></li><li class="dropdown-item"><!----> <a href="/interview/python/" class="nav-link">Python开发岗</a></li><li class="dropdown-item"><!----> <a href="/interview/hr/" class="nav-link">人事爱问</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f4931c/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/norm/alisongshan/" class="nav-link">阿里Java开发手册</a></li><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/wuKongNotNull/images-hosting/wukong-website/wukong-favicon-nobg.png"> <div class="blogger-info"><h3>悟空非空也</h3> <span>精通各语言拼写的野生程序员</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><a href="/blogs/" class="link-title">博客</a> <span class="title" style="display:none;">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/WuKongNotNull/awesome-free-vpn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  科学上网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/categories/?category=%E5%A5%BD%E7%89%A9%E6%8E%A8%E8%8D%90%E5%AE%98&amp;.html" class="nav-link">好物推荐官</a></li><li class="dropdown-item"><!----> <a href="/categories/?category=%E9%9A%8F%E7%AC%94&amp;.html" class="nav-link">随笔感悟</a></li></ul></div></div><div class="nav-item"><a href="/pages/3ad3de/" class="nav-link">编程导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/javase/" class="nav-link">JavaSE</a></li><li class="dropdown-item"><!----> <a href="/java/javaee/" class="nav-link">JavaEE</a></li><li class="dropdown-item"><!----> <a href="/java/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/java/mybatis/" class="nav-link">MyBatis</a></li><li class="dropdown-item"><!----> <a href="/java/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/java/springcloud/" class="nav-link">SpringCloud</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/tutorial/" class="nav-link">Python教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大前端" class="dropdown-title"><a href="/fore/" class="link-title">大前端</a> <span class="title" style="display:none;">大前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fore/javascript/" class="nav-link">JavaScript基础教程</a></li><li class="dropdown-item"><!----> <a href="/fore/js/" class="nav-link">JavaScript高级程序设计</a></li><li class="dropdown-item"><!----> <a href="/fore/es6/" class="nav-link">ES6 教程</a></li><li class="dropdown-item"><!----> <a href="/fore/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/fore/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/fore/typescript-axios/" class="nav-link">TypeScript 从零实现 axios</a></li><li class="dropdown-item"><!----> <a href="/fore/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/interview/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/c/" class="nav-link">C开发岗</a></li><li class="dropdown-item"><!----> <a href="/interview/java/" class="nav-link">Java开发岗</a></li><li class="dropdown-item"><!----> <a href="/interview/python/" class="nav-link">Python开发岗</a></li><li class="dropdown-item"><!----> <a href="/interview/hr/" class="nav-link">人事爱问</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f4931c/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/norm/alisongshan/" class="nav-link">阿里Java开发手册</a></li><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Python教程</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e0c482/" class="sidebar-link">初识Python</a></li><li><a href="/pages/50e8d2/" class="sidebar-link">语言元素</a></li><li><a href="/pages/6a34ca/" class="sidebar-link">分支结构</a></li><li><a href="/pages/69345a/" class="sidebar-link">循环结构</a></li><li><a href="/pages/b57e95/" class="sidebar-link">构造程序逻辑</a></li><li><a href="/pages/e2b10d/" class="sidebar-link">函数和模块的使用</a></li><li><a href="/pages/3a032d/" class="sidebar-link">字符串和常用数据结构</a></li><li><a href="/pages/dfac8d/" class="sidebar-link">面向对象编程基础</a></li><li><a href="/pages/491f66/" class="sidebar-link">面向对象进阶</a></li><li><a href="/pages/f8204e/" class="sidebar-link">图形用户界面和游戏开发</a></li><li><a href="/pages/206666/" class="sidebar-link">文件和异常</a></li><li><a href="/pages/d1695b/" class="sidebar-link">字符串和正则表达式</a></li><li><a href="/pages/705698/" class="sidebar-link">进程和线程</a></li><li><a href="/pages/2ecb8a/" class="sidebar-link">网络编程入门和网络应用开发</a></li><li><a href="/pages/ad416c/" class="sidebar-link">图像和办公文档处理</a></li><li><a href="/pages/ee25df/" class="sidebar-link">Python语言进阶</a></li><li><a href="/pages/5c3bbe/" aria-current="page" class="active sidebar-link">关系型数据库MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#关系数据库概述" class="sidebar-link">关系数据库概述</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#mysql简介" class="sidebar-link">MySQL简介</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#sql详解" class="sidebar-link">SQL详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#ddl-数据定义语言" class="sidebar-link">DDL（数据定义语言）</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#dml-数据操作语言" class="sidebar-link">DML（数据操作语言）</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#dql-数据查询语言" class="sidebar-link">DQL（数据查询语言）</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#dcl-数据控制语言" class="sidebar-link">DCL（数据控制语言）</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#索引" class="sidebar-link">索引</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#视图" class="sidebar-link">视图</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#过程" class="sidebar-link">过程</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#mysql8窗口函数" class="sidebar-link">MySQL8窗口函数</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#其他内容" class="sidebar-link">其他内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#范式理论" class="sidebar-link">范式理论</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#数据完整性" class="sidebar-link">数据完整性</a></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#数据一致性" class="sidebar-link">数据一致性</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/5c3bbe/#python数据库编程" class="sidebar-link">Python数据库编程</a></li></ul></li><li><a href="/pages/e7adb0/" class="sidebar-link">NoSQL数据库入门</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Django</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络爬虫</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>人工智能</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/python" title="Python-目录页" data-v-1cd794fe>Python</a></li> <li data-v-1cd794fe><a href="/python/#Python教程" title="Python#Python教程" data-v-1cd794fe>Python教程</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/wuKongNotNull" target="_blank" title="作者" class="beLink" data-v-1cd794fe>悟空非空也</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-10-31</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          关系型数据库MySQL
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="关系数据库入门"><a href="#关系数据库入门" class="header-anchor">#</a> 关系数据库入门</h1> <h2 id="关系数据库概述"><a href="#关系数据库概述" class="header-anchor">#</a> 关系数据库概述</h2> <ol><li><p>数据持久化 - 将数据保存到能够长久保存数据的存储介质中，在掉电的情况下数据也不会丢失。</p></li> <li><p>数据库发展史 - 网状数据库、层次数据库、关系数据库、NoSQL数据库、NewSQL数据库。</p> <blockquote><p>1970年，IBM的研究员E.F.Codd在<em>Communication of the ACM</em>上发表了名为<em>A Relational Model of Data for Large Shared Data Banks</em>的论文，提出了<strong>关系模型</strong>的概念，奠定了关系模型的理论基础。后来Codd又陆续发表多篇文章，论述了范式理论和衡量关系系统的12条标准，用数学理论奠定了关系数据库的基础。</p></blockquote></li> <li><p>关系数据库特点。</p> <ul><li><p>理论基础：<strong>集合论</strong>和<strong>关系代数</strong>。</p></li> <li><p>具体表象：用<strong>二维表</strong>（有行和列）组织数据。</p></li> <li><p>编程语言：<strong>结构化查询语言</strong>（SQL）。</p></li></ul></li> <li><p>ER模型（实体关系模型）和概念模型图。</p> <p><strong>ER模型</strong>，全称为<strong>实体关系模型</strong>（Entity-Relationship Model），由美籍华裔计算机科学家陈品山先生提出，是概念数据模型的高层描述方式，如下图所示。</p> <img src="https://cdn.jsdelivr.net/gh/wuKongNotNull/images-hosting/wukong-website/er_diagram.png" style="zoom:50%;"> <ul><li>实体 - 矩形框</li> <li>属性 - 椭圆框</li> <li>关系 - 菱形框</li> <li>重数 - 1:1（一对一） / 1:N（一对多） / M:N（多对多）</li></ul> <p>实际项目开发中，我们可以利用数据库建模工具（如：PowerDesigner）来绘制概念数据模型（其本质就是ER模型），然后再设置好目标数据库系统，将概念模型转换成物理模型，最终生成创建二维表的SQL（很多工具都可以根据我们设计的物理模型图以及设定的目标数据库来导出SQL或直接生成数据表）。</p> <img src="https://cdn.jsdelivr.net/gh/wuKongNotNull/images-hosting/wukong-website/conceptual_model.png" style="zoom:50%;"></li> <li><p>关系数据库产品。</p> <ul><li><a href="https://www.oracle.com/index.html" target="_blank" rel="noopener noreferrer">Oracle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - 目前世界上使用最为广泛的数据库管理系统，作为一个通用的数据库系统，它具有完整的数据管理功能；作为一个关系数据库，它是一个完备关系的产品；作为分布式数据库，它实现了分布式处理的功能。在Oracle最新的12c版本中，还引入了多承租方架构，使用该架构可轻松部署和管理数据库云。</li> <li><a href="https://www.ibm.com/analytics/us/en/db2/" target="_blank" rel="noopener noreferrer">DB2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - IBM公司开发的、主要运行于Unix（包括IBM自家的<a href="https://zh.wikipedia.org/wiki/AIX" target="_blank" rel="noopener noreferrer">AIX<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）、Linux、以及Windows服务器版等系统的关系数据库产品。DB2历史悠久且被认为是最早使用SQL的数据库产品，它拥有较为强大的商业智能功能。</li> <li><a href="https://www.microsoft.com/en-us/sql-server/" target="_blank" rel="noopener noreferrer">SQL Server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - 由Microsoft开发和推广的关系型数据库产品，最初适用于中小企业的数据管理，但是近年来它的应用范围有所扩展，部分大企业甚至是跨国公司也开始基于它来构建自己的数据管理系统。</li> <li><a href="https://www.mysql.com/" target="_blank" rel="noopener noreferrer">MySQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - MySQL是开放源代码的，任何人都可以在GPL（General Public License）的许可下下载并根据个性化的需要对其进行修改。MySQL因为其速度、可靠性和适应性而备受关注。</li> <li><a href="">PostgreSQL</a> - 在BSD许可证下发行的开放源代码的关系数据库产品。</li></ul></li></ol> <h2 id="mysql简介"><a href="#mysql简介" class="header-anchor">#</a> MySQL简介</h2> <p>MySQL最早是由瑞典的MySQL AB公司开发的一个开放源码的关系数据库管理系统，该公司于2008年被昇阳微系统公司（Sun Microsystems）收购。在2009年，甲骨文公司（Oracle）收购昇阳微系统公司，因此在这之后MySQL成为了Oracle旗下产品。</p> <p>MySQL在过去由于性能高、成本低、可靠性好，已经成为最流行的开源数据库，因此被广泛地应用于中小型网站开发。随着MySQL的不断成熟，它也逐渐被应用于更多大规模网站和应用，比如维基百科、谷歌（Google）、脸书（Facebook）、淘宝网等网站都使用了MySQL来提供数据持久化服务。</p> <p>甲骨文公司收购后昇阳微系统公司，大幅调涨MySQL商业版的售价，且甲骨文公司不再支持另一个自由软件项目<a href="https://zh.wikipedia.org/wiki/OpenSolaris" target="_blank" rel="noopener noreferrer">OpenSolaris<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的发展，因此导致自由软件社区对于Oracle是否还会持续支持MySQL社区版（MySQL的各个发行版本中唯一免费的版本）有所担忧，MySQL的创始人麦克尔·维德纽斯以MySQL为基础，成立分支计划<a href="https://zh.wikipedia.org/wiki/MariaDB" target="_blank" rel="noopener noreferrer">MariaDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（以他女儿的名字命名的数据库）。有许多原来使用MySQL数据库的公司（例如：维基百科）已经陆续完成了从MySQL数据库到MariaDB数据库的迁移。</p> <ol><li><p>安装和配置</p> <blockquote><p><strong>说明</strong>：下面的安装和配置都是以CentOS Linux环境为例，如果需要在其他系统下安装MySQL，读者可以自行在网络上查找对应的安装教程）。</p></blockquote> <ul><li><p>刚才说过，MySQL有一个分支版本名叫MariaDB，该数据库旨在继续保持MySQL数据库在<a href="https://zh.wikipedia.org/wiki/GNU%E9%80%9A%E7%94%A8%E5%85%AC%E5%85%B1%E8%AE%B8%E5%8F%AF%E8%AF%81" target="_blank" rel="noopener noreferrer">GNU GPL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下开源。如果要使用MariaDB作为MySQL的替代品，可以使用下面的命令进行安装。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>yum <span class="token function">install</span> mariadb mariadb-server
</code></pre></div></li> <li><p>如果要安装官方版本的MySQL，可以在<a href="https://www.mysql.com/" target="_blank" rel="noopener noreferrer">MySQL官方网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载安装文件。首先在下载页面中选择平台和版本，然后找到对应的下载链接。下面以MySQL 5.7.26版本和Red Hat Enterprise Linux为例，直接下载包含所有安装文件的归档文件，解归档之后通过包管理工具进行安装。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar
<span class="token function">tar</span> -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar
</code></pre></div><p>如果系统上有MariaDB相关的文件，需要先移除MariaDB相关的文件。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>yum list installed <span class="token operator">|</span> <span class="token function">grep</span> mariadb <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1}'</span> <span class="token operator">|</span> <span class="token function">xargs</span> yum erase -y
</code></pre></div><p>接下来可以按照如下所示的顺序用RPM（Redhat Package Manager）工具安装MySQL。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">rpm</span> -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm
<span class="token function">rpm</span> -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm
<span class="token function">rpm</span> -ivh mysql-community-libs-compat-5.7.26-1.el7.x86_64.rpm
<span class="token function">rpm</span> -ivh mysql-community-devel-5.7.26-1.el7.x86_64.rpm
<span class="token function">rpm</span> -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm
<span class="token function">rpm</span> -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm
</code></pre></div><p>可以使用下面的命令查看已经安装的MySQL相关的包。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre></div></li> <li><p>配置MySQL。</p> <p>MySQL的配置文件在<code>/etc</code>目录下，名为<code>my.cnf</code>，默认的配置文件内容如下所示。如果对这个文件不理解并没有关系，什么时候用到这个配置文件什么时候再了解它就行了。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> /etc/my.cnf
</code></pre></div><div class="language-INI extra-class"><pre class="language-ini"><code><span class="token comment"># For advice on how to change settings please see</span>
<span class="token comment"># http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
<span class="token comment">#</span>
<span class="token comment"># Remove leading # and set to the amount of RAM for the most important data</span>
<span class="token comment"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span>
<span class="token comment"># innodb_buffer_pool_size = 128M</span>
<span class="token comment">#</span>
<span class="token comment"># Remove leading # to turn on a very important data integrity option: logging</span>
<span class="token comment"># changes to the binary log between backups.</span>
<span class="token comment"># log_bin</span>
<span class="token comment">#</span>
<span class="token comment"># Remove leading # to set options mainly useful for reporting servers.</span>
<span class="token comment"># The server defaults are faster for transactions and fast SELECTs.</span>
<span class="token comment"># Adjust sizes as needed, experiment to find the optimal values.</span>
<span class="token comment"># join_buffer_size = 128M</span>
<span class="token comment"># sort_buffer_size = 2M</span>
<span class="token comment"># read_rnd_buffer_size = 2M</span>
<span class="token key attr-name">datadir</span><span class="token punctuation">=</span><span class="token value attr-value">/var/lib/mysql</span>
<span class="token key attr-name">socket</span><span class="token punctuation">=</span><span class="token value attr-value">/var/lib/mysql/mysql.sock</span>

<span class="token comment"># Disabling symbolic-links is recommended to prevent assorted security risks</span>
<span class="token key attr-name">symbolic-links</span><span class="token punctuation">=</span><span class="token value attr-value">0</span>

<span class="token key attr-name">log-error</span><span class="token punctuation">=</span><span class="token value attr-value">/var/log/mysqld.log</span>
<span class="token key attr-name">pid-file</span><span class="token punctuation">=</span><span class="token value attr-value">/var/run/mysqld/mysqld.pid</span>
</code></pre></div></li> <li><p>启动MySQL服务。</p> <p>可以使用下面的命令来启动MySQL。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">service</span> mysqld start
</code></pre></div><p>在CentOS 7中，更推荐使用下面的命令来启动MySQL。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>systemctl start mysqld
</code></pre></div><p>启动MySQL成功后，可以通过下面的命令来检查网络端口使用情况，MySQL默认使用3306端口。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">netstat</span> -ntlp <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre></div><p>也可以使用下面的命令查找是否有名为mysqld的进程。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>pgrep mysqld
</code></pre></div></li> <li><p>使用MySQL客户端工具连接服务器。</p> <p>命令行工具：</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>mysql -u root -p
</code></pre></div><blockquote><p>说明：启动客户端时，<code>-u</code>参数用来指定用户名，MySQL默认的超级管理账号为<code>root</code>；<code>-p</code>表示要输入密码（用户口令）；如果连接的是其他主机而非本机，可以用<code>-h</code>来指定连接主机的主机名或IP地址。</p></blockquote> <p>如果是首次安装MySQL，可以使用下面的命令来找到默认的初始密码。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> /var/log/mysqld.log <span class="token operator">|</span> <span class="token function">grep</span> password
</code></pre></div><p>上面的命令会查看MySQL的日志带有password的行，在显示的结果中<code>root@localhost:</code>后面的部分就是默认设置的初始密码。</p> <p>修改超级管理员（root）的访问口令为<code>123456</code>。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">set</span> <span class="token keyword">global</span> validate_password_policy<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> validate_password_length<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">user</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>说明</strong>：MySQL较新的版本默认不允许使用弱口令作为用户口令，所以我们通过上面的前两条命令修改了验证用户口令的策略和口令的长度。事实上我们不应该使用弱口令，因为存在用户口令被暴力破解的风险。近年来，攻击数据库窃取数据和劫持数据库勒索比特币的事件屡见不鲜，要避免这些潜在的风险，最为重要的一点是不要让数据库服务器暴露在公网上（最好的做法是将数据库置于内网，至少要做到不向公网开放数据库服务器的访问端口），另外要保管好<code>root</code>账号的口令，应用系统需要访问数据库时，通常不使用<code>root</code>账号进行访问，而是创建其他拥有适当权限的账号来访问。</p></blockquote> <p>再次使用客户端工具连接MySQL服务器时，就可以使用新设置的口令了。在实际开发中，为了方便用户操作，可以选择图形化的客户端工具来连接MySQL服务器，包括：</p> <ul><li>MySQL Workbench（官方提供的工具）</li> <li>Navicat for MySQL（界面简单，功能直观）</li> <li>SQLyog for MySQL（强大的MySQL数据库管理员工具）</li></ul></li></ul></li> <li><p>常用命令。</p> <ul><li><p>查看服务器版本。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看所有数据库。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>切换到指定数据库。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看数据库下所有表。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>show tables<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>获取帮助。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code>? contents<span class="token punctuation">;</span>
? functions<span class="token punctuation">;</span>
? <span class="token keyword">numeric</span> functions<span class="token punctuation">;</span>
? round<span class="token punctuation">;</span>

? <span class="token keyword">data</span> <span class="token keyword">types</span><span class="token punctuation">;</span>
? <span class="token keyword">longblob</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ol> <h2 id="sql详解"><a href="#sql详解" class="header-anchor">#</a> SQL详解</h2> <p>我们通常可以将SQL分为三类：DDL（数据定义语言）、DML（数据操作语言）和DCL（数据控制语言）。DDL主要用于创建（create）、删除（drop）、修改（alter）数据库中的对象，比如创建、删除和修改二维表；DML主要负责插入数据（insert）、删除数据（delete）、更新数据（update）和查询（select）；DCL通常用于授予权限（grant）和召回权限（revoke）。</p> <blockquote><p><strong>说明</strong>：SQL是不区分大小写的语言，为了书写和识别方便，下面的SQL都使用了小写字母来书写。</p></blockquote> <h3 id="ddl-数据定义语言"><a href="#ddl-数据定义语言" class="header-anchor">#</a> DDL（数据定义语言）</h3> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 如果存在名为school的数据库就删除它</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> <span class="token punctuation">`</span>school<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建名为school的数据库并设置默认的字符集和排序方式</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token punctuation">`</span>school<span class="token punctuation">`</span> <span class="token keyword">default</span> <span class="token keyword">character</span> <span class="token keyword">set</span> utf8mb4<span class="token punctuation">;</span>

<span class="token comment">-- 切换到school数据库上下文环境</span>
<span class="token keyword">use</span> <span class="token punctuation">`</span>school<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建学院表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>tb_college<span class="token punctuation">`</span>
<span class="token punctuation">(</span>
<span class="token punctuation">`</span>col_id<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'编号'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>col_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'名称'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>col_intro<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">''</span> <span class="token keyword">comment</span> <span class="token string">'介绍'</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>col_id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">comment</span> <span class="token string">'学院表'</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建学生表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>tb_student<span class="token punctuation">`</span>
<span class="token punctuation">(</span>
<span class="token punctuation">`</span>stu_id<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学号'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>stu_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>stu_sex<span class="token punctuation">`</span> <span class="token keyword">boolean</span> <span class="token keyword">default</span> <span class="token number">1</span> <span class="token keyword">comment</span> <span class="token string">'性别'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>stu_birth<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'出生日期'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>stu_addr<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">''</span> <span class="token keyword">comment</span> <span class="token string">'籍贯'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>col_id<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'所属学院'</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>stu_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>col_id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">references</span> <span class="token punctuation">`</span>tb_college<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>col_id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">comment</span> <span class="token string">'学生表'</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建教师表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>tb_teacher<span class="token punctuation">`</span>
<span class="token punctuation">(</span>
<span class="token punctuation">`</span>tea_id<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'工号'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>tea_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>tea_title<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'助教'</span> <span class="token keyword">comment</span> <span class="token string">'职称'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>col_id<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'所属学院'</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>tea_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>col_id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">references</span> <span class="token punctuation">`</span>tb_college<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>col_id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">comment</span> <span class="token string">'老师表'</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建课程表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>tb_course<span class="token punctuation">`</span>
<span class="token punctuation">(</span>
<span class="token punctuation">`</span>cou_id<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'编号'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>cou_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'名称'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>cou_credit<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学分'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>tea_id<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'授课老师'</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>cou_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>tea_id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">references</span> <span class="token punctuation">`</span>tb_teacher<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>tea_id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">comment</span> <span class="token string">'课程表'</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建选课记录表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>tb_record<span class="token punctuation">`</span>
<span class="token punctuation">(</span>
<span class="token punctuation">`</span>rec_id<span class="token punctuation">`</span> <span class="token keyword">bigint</span> <span class="token keyword">unsigned</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'选课记录号'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>sid<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学号'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>cid<span class="token punctuation">`</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'课程编号'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>sel_date<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'选课日期'</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>score<span class="token punctuation">`</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'考试成绩'</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>rec_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">references</span> <span class="token punctuation">`</span>tb_student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>stu_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>cid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">references</span> <span class="token punctuation">`</span>tb_course<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>cou_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">unique</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sid<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>cid<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">comment</span> <span class="token string">'选课记录表'</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的DDL有几个地方需要强调一下：</p> <ul><li><p>创建数据库时，我们通过<code>default charset utf8</code>指定了数据库默认使用的字符集，我们推荐使用该字符集，因为utf8能够支持国际化编码。如果将来数据库中用到的字符可能包括类似于Emoji这样的图片字符，也可以将默认字符集设定为utf8mb4（最大4字节的utf-8编码）。查看MySQL支持的字符集可以执行下面的语句。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">character</span> <span class="token keyword">set</span><span class="token punctuation">;</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>+----------+---------------------------------+---------------------+--------+
| Charset  | Description                     | Default collation   | Maxlen |
+----------+---------------------------------+---------------------+--------+
| big5     | Big5 Traditional Chinese        | big5_chinese_ci     |      2 |
| dec8     | DEC West European               | dec8_swedish_ci     |      1 |
| cp850    | DOS West European               | cp850_general_ci    |      1 |
| hp8      | HP West European                | hp8_english_ci      |      1 |
| koi8r    | KOI8-R Relcom Russian           | koi8r_general_ci    |      1 |
| latin1   | cp1252 West European            | latin1_swedish_ci   |      1 |
| latin2   | ISO 8859-2 Central European     | latin2_general_ci   |      1 |
| swe7     | 7bit Swedish                    | swe7_swedish_ci     |      1 |
| ascii    | US ASCII                        | ascii_general_ci    |      1 |
| ujis     | EUC-JP Japanese                 | ujis_japanese_ci    |      3 |
| sjis     | Shift-JIS Japanese              | sjis_japanese_ci    |      2 |
| hebrew   | ISO 8859-8 Hebrew               | hebrew_general_ci   |      1 |
| tis620   | TIS620 Thai                     | tis620_thai_ci      |      1 |
| euckr    | EUC-KR Korean                   | euckr_korean_ci     |      2 |
| koi8u    | KOI8-U Ukrainian                | koi8u_general_ci    |      1 |
| gb2312   | GB2312 Simplified Chinese       | gb2312_chinese_ci   |      2 |
| greek    | ISO 8859-7 Greek                | greek_general_ci    |      1 |
| cp1250   | Windows Central European        | cp1250_general_ci   |      1 |
| gbk      | GBK Simplified Chinese          | gbk_chinese_ci      |      2 |
| latin5   | ISO 8859-9 Turkish              | latin5_turkish_ci   |      1 |
| armscii8 | ARMSCII-8 Armenian              | armscii8_general_ci |      1 |
| utf8     | UTF-8 Unicode                   | utf8_general_ci     |      3 |
| ucs2     | UCS-2 Unicode                   | ucs2_general_ci     |      2 |
| cp866    | DOS Russian                     | cp866_general_ci    |      1 |
| keybcs2  | DOS Kamenicky Czech-Slovak      | keybcs2_general_ci  |      1 |
| macce    | Mac Central European            | macce_general_ci    |      1 |
| macroman | Mac West European               | macroman_general_ci |      1 |
| cp852    | DOS Central European            | cp852_general_ci    |      1 |
| latin7   | ISO 8859-13 Baltic              | latin7_general_ci   |      1 |
| utf8mb4  | UTF-8 Unicode                   | utf8mb4_general_ci  |      4 |
| cp1251   | Windows Cyrillic                | cp1251_general_ci   |      1 |
| utf16    | UTF-16 Unicode                  | utf16_general_ci    |      4 |
| utf16le  | UTF-16LE Unicode                | utf16le_general_ci  |      4 |
| cp1256   | Windows Arabic                  | cp1256_general_ci   |      1 |
| cp1257   | Windows Baltic                  | cp1257_general_ci   |      1 |
| utf32    | UTF-32 Unicode                  | utf32_general_ci    |      4 |
| binary   | Binary pseudo charset           | binary              |      1 |
| geostd8  | GEOSTD8 Georgian                | geostd8_general_ci  |      1 |
| cp932    | SJIS for Windows Japanese       | cp932_japanese_ci   |      2 |
| eucjpms  | UJIS for Windows Japanese       | eucjpms_japanese_ci |      3 |
| gb18030  | China National Standard GB18030 | gb18030_chinese_ci  |      4 |
+----------+---------------------------------+---------------------+--------+
41 rows in set (0.00 sec)
</code></pre></div><p>如果要设置MySQL服务启动时默认使用的字符集，可以修改MySQL的配置并添加以下内容</p> <div class="language-INI extra-class"><pre class="language-ini"><code><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">character-set-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8</span>
</code></pre></div></li> <li><p>在创建表的时候，我们可以在右圆括号的后面通过<code>engine=XXX</code>来指定表的存储引擎，MySQL支持多种存储引擎，可以通过<code>show engines</code>命令进行查看。MySQL 5.5以后的版本默认使用的存储引擎是InnoDB，它正好也就是我们推荐大家使用的存储引擎（因为InnoDB更适合互联网应用对高并发、性能以及事务支持等方面的需求）。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> engines\G
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>*************************** 1. row ***************************
      Engine: InnoDB
     Support: DEFAULT
     Comment: Supports transactions, row-level locking, and foreign keys
Transactions: YES
          XA: YES
  Savepoints: YES
*************************** 2. row ***************************
      Engine: MRG_MYISAM
     Support: YES
     Comment: Collection of identical MyISAM tables
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 3. row ***************************
      Engine: MEMORY
     Support: YES
     Comment: Hash based, stored in memory, useful for temporary tables
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 4. row ***************************
      Engine: BLACKHOLE
     Support: YES
     Comment: /dev/null storage engine (anything you write to it disappears)
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 5. row ***************************
      Engine: MyISAM
     Support: YES
     Comment: MyISAM storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 6. row ***************************
      Engine: CSV
     Support: YES
     Comment: CSV storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 7. row ***************************
      Engine: ARCHIVE
     Support: YES
     Comment: Archive storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 8. row ***************************
      Engine: PERFORMANCE_SCHEMA
     Support: YES
     Comment: Performance Schema
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 9. row ***************************
      Engine: FEDERATED
     Support: NO
     Comment: Federated MySQL storage engine
Transactions: NULL
          XA: NULL
  Savepoints: NULL
9 rows in set (0.00 sec)
</code></pre></div><p>下面的表格对MySQL几种常用的数据引擎进行了简单的对比。</p> <table><thead><tr><th>特性</th> <th>InnoDB</th> <th>MRG_MYISAM</th> <th>MEMORY</th> <th>MyISAM</th></tr></thead> <tbody><tr><td>存储限制</td> <td>有</td> <td>没有</td> <td>有</td> <td>有</td></tr> <tr><td>事务</td> <td>支持</td> <td></td> <td></td> <td></td></tr> <tr><td>锁机制</td> <td>行锁</td> <td>表锁</td> <td>表锁</td> <td>表锁</td></tr> <tr><td>B树索引</td> <td>支持</td> <td>支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>哈希索引</td> <td></td> <td></td> <td>支持</td> <td></td></tr> <tr><td>全文检索</td> <td>支持（5.6+）</td> <td></td> <td></td> <td>支持</td></tr> <tr><td>集群索引</td> <td>支持</td> <td></td> <td></td> <td></td></tr> <tr><td>数据缓存</td> <td>支持</td> <td></td> <td>支持</td> <td></td></tr> <tr><td>索引缓存</td> <td>支持</td> <td>支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>数据可压缩</td> <td></td> <td></td> <td></td> <td>支持</td></tr> <tr><td>内存使用</td> <td>高</td> <td>低</td> <td>中</td> <td>低</td></tr> <tr><td>存储空间使用</td> <td>高</td> <td>低</td> <td></td> <td>低</td></tr> <tr><td>批量插入性能</td> <td>低</td> <td>高</td> <td>高</td> <td>高</td></tr> <tr><td>是否支持外键</td> <td>支持</td> <td></td> <td></td> <td></td></tr></tbody></table> <p>通过上面的比较我们可以了解到，InnoDB是唯一能够支持外键、事务以及行锁的存储引擎，所以我们之前说它更适合互联网应用，而且它也是较新的MySQL版本中默认使用的存储引擎。</p></li> <li><p>在定义表结构为每个字段选择数据类型时，如果不清楚哪个数据类型更合适，可以通过MySQL的帮助系统来了解每种数据类型的特性、数据的长度和精度等相关信息。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code>? <span class="token keyword">data</span> <span class="token keyword">types</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>You asked for help about help category: &quot;Data Types&quot;
For more information, type 'help &lt;item&gt;', where &lt;item&gt; is one of the following
topics:
   AUTO_INCREMENT
   BIGINT
   BINARY
   BIT
   BLOB
   BLOB DATA TYPE
   BOOLEAN
   CHAR
   CHAR BYTE
   DATE
   DATETIME
   DEC
   DECIMAL
   DOUBLE
   DOUBLE PRECISION
   ENUM
   FLOAT
   INT
   INTEGER
   LONGBLOB
   LONGTEXT
   MEDIUMBLOB
   MEDIUMINT
   MEDIUMTEXT
   SET DATA TYPE
   SMALLINT
   TEXT
   TIME
   TIMESTAMP
   TINYBLOB
   TINYINT
   TINYTEXT
   VARBINARY
   VARCHAR
   YEAR DATA TYPE
</code></pre></div><div class="language-SQL extra-class"><pre class="language-sql"><code>? <span class="token keyword">varchar</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>Name: 'VARCHAR'
Description:
[NATIONAL] VARCHAR(M) [CHARACTER SET charset_name] [COLLATE
collation_name]

A variable-length string. M represents the maximum column length in
characters. The range of M is 0 to 65,535. The effective maximum length
of a VARCHAR is subject to the maximum row size (65,535 bytes, which is
shared among all columns) and the character set used. For example, utf8
characters can require up to three bytes per character, so a VARCHAR
column that uses the utf8 character set can be declared to be a maximum
of 21,844 characters. See
http://dev.mysql.com/doc/refman/5.7/en/column-count-limit.html.

MySQL stores VARCHAR values as a 1-byte or 2-byte length prefix plus
data. The length prefix indicates the number of bytes in the value. A
VARCHAR column uses one length byte if values require no more than 255
bytes, two length bytes if values may require more than 255 bytes.

*Note*:

MySQL follows the standard SQL specification, and does not remove
trailing spaces from VARCHAR values.

VARCHAR is shorthand for CHARACTER VARYING. NATIONAL VARCHAR is the
standard SQL way to define that a VARCHAR column should use some
predefined character set. MySQL uses utf8 as this predefined character
set. http://dev.mysql.com/doc/refman/5.7/en/charset-national.html.
NVARCHAR is shorthand for NATIONAL VARCHAR.

URL: http://dev.mysql.com/doc/refman/5.7/en/string-type-overview.html
</code></pre></div><p>在数据类型的选择上，保存字符串数据通常都使用VARCHAR和CHAR两种类型，前者通常称为变长字符串，而后者通常称为定长字符串；对于InnoDB存储引擎，行存储格式没有区分固定长度和可变长度列，因此VARCHAR类型好CHAR类型没有本质区别，后者不一定比前者性能更好。如果要保存的很大字符串，可以使用TEXT类型；如果要保存很大的字节串，可以使用BLOB（二进制大对象）类型。在MySQL中，TEXT和BLOB又分别包括TEXT、MEDIUMTEXT、LONGTEXT和BLOB、MEDIUMBLOB、LONGBLOB三种不同的类型，它们主要的区别在于存储数据的最大大小不同。保存浮点数可以用FLOAT或DOUBLE类型，而保存定点数应该使用DECIMAL类型。如果要保存时间日期，DATETIME类型优于TIMESTAMP类型，因为前者能表示的时间日期范围更大。</p></li></ul> <h3 id="dml-数据操作语言"><a href="#dml-数据操作语言" class="header-anchor">#</a> DML（数据操作语言）</h3> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> school<span class="token punctuation">;</span>

<span class="token comment">-- 插入学院数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>tb_college<span class="token punctuation">`</span> 
    <span class="token punctuation">(</span><span class="token punctuation">`</span>col_name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>col_intro<span class="token punctuation">`</span><span class="token punctuation">)</span> 
<span class="token keyword">values</span> 
    <span class="token punctuation">(</span><span class="token string">'计算机学院'</span><span class="token punctuation">,</span> <span class="token string">'计算机学院1958年设立计算机专业，1981年建立计算机科学系，1998年设立计算机学院，2005年5月，为了进一步整合教学和科研资源，学校决定，计算机学院和软件学院行政班子合并统一运作、实行教学和学生管理独立运行的模式。 学院下设三个系：计算机科学与技术系、物联网工程系、计算金融系；两个研究所：图象图形研究所、网络空间安全研究院（2015年成立）；三个教学实验中心：计算机基础教学实验中心、IBM技术中心和计算机专业实验中心。'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'外国语学院'</span><span class="token punctuation">,</span> <span class="token string">'外国语学院设有7个教学单位，6个文理兼收的本科专业；拥有1个一级学科博士授予点，3个二级学科博士授予点，5个一级学科硕士学位授权点，5个二级学科硕士学位授权点，5个硕士专业授权领域，同时还有2个硕士专业学位（MTI）专业；有教职员工210余人，其中教授、副教授80余人，教师中获得中国国内外名校博士学位和正在职攻读博士学位的教师比例占专任教师的60%以上。'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'经济管理学院'</span><span class="token punctuation">,</span> <span class="token string">'经济学院前身是创办于1905年的经济科；已故经济学家彭迪先、张与九、蒋学模、胡寄窗、陶大镛、胡代光，以及当代学者刘诗白等曾先后在此任教或学习。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入学生数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>tb_student<span class="token punctuation">`</span> 
    <span class="token punctuation">(</span><span class="token punctuation">`</span>stu_id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>stu_name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>stu_sex<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>stu_birth<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>stu_addr<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>col_id<span class="token punctuation">`</span><span class="token punctuation">)</span> 
<span class="token keyword">values</span>
    <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token string">'杨过'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1990-3-4'</span><span class="token punctuation">,</span> <span class="token string">'湖南长沙'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token string">'任我行'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1992-2-2'</span><span class="token punctuation">,</span> <span class="token string">'湖南长沙'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1033</span><span class="token punctuation">,</span> <span class="token string">'王语嫣'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'1989-12-3'</span><span class="token punctuation">,</span> <span class="token string">'四川成都'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1572</span><span class="token punctuation">,</span> <span class="token string">'岳不群'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1993-7-19'</span><span class="token punctuation">,</span> <span class="token string">'陕西咸阳'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1378</span><span class="token punctuation">,</span> <span class="token string">'纪嫣然'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'1995-8-12'</span><span class="token punctuation">,</span> <span class="token string">'四川绵阳'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1954</span><span class="token punctuation">,</span> <span class="token string">'林平之'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1994-9-20'</span><span class="token punctuation">,</span> <span class="token string">'福建莆田'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">2035</span><span class="token punctuation">,</span> <span class="token string">'东方不败'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1988-6-30'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">3011</span><span class="token punctuation">,</span> <span class="token string">'林震南'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1985-12-12'</span><span class="token punctuation">,</span> <span class="token string">'福建莆田'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">3755</span><span class="token punctuation">,</span> <span class="token string">'项少龙'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1993-1-25'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">3923</span><span class="token punctuation">,</span> <span class="token string">'杨不悔'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'1985-4-17'</span><span class="token punctuation">,</span> <span class="token string">'四川成都'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入老师数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>tb_teacher<span class="token punctuation">`</span> 
    <span class="token punctuation">(</span><span class="token punctuation">`</span>tea_id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tea_name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tea_title<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>col_id<span class="token punctuation">`</span><span class="token punctuation">)</span> 
<span class="token keyword">values</span> 
    <span class="token punctuation">(</span><span class="token number">1122</span><span class="token punctuation">,</span> <span class="token string">'张三丰'</span><span class="token punctuation">,</span> <span class="token string">'教授'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1133</span><span class="token punctuation">,</span> <span class="token string">'宋远桥'</span><span class="token punctuation">,</span> <span class="token string">'副教授'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1144</span><span class="token punctuation">,</span> <span class="token string">'杨逍'</span><span class="token punctuation">,</span> <span class="token string">'副教授'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">2255</span><span class="token punctuation">,</span> <span class="token string">'范遥'</span><span class="token punctuation">,</span> <span class="token string">'副教授'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">3366</span><span class="token punctuation">,</span> <span class="token string">'韦一笑'</span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入课程数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>tb_course<span class="token punctuation">`</span> 
    <span class="token punctuation">(</span><span class="token punctuation">`</span>cou_id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>cou_name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>cou_credit<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tea_id<span class="token punctuation">`</span><span class="token punctuation">)</span> 
<span class="token keyword">values</span> 
    <span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">,</span> <span class="token string">'Python程序设计'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1122</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">2222</span><span class="token punctuation">,</span> <span class="token string">'Web前端开发'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1122</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">3333</span><span class="token punctuation">,</span> <span class="token string">'操作系统'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1122</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">4444</span><span class="token punctuation">,</span> <span class="token string">'计算机网络'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1133</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">5555</span><span class="token punctuation">,</span> <span class="token string">'编译原理'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1144</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">6666</span><span class="token punctuation">,</span> <span class="token string">'算法和数据结构'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1144</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">7777</span><span class="token punctuation">,</span> <span class="token string">'经贸法语'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">,</span> <span class="token string">'成本会计'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3366</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">,</span> <span class="token string">'审计学'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3366</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入选课数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>tb_record<span class="token punctuation">`</span> 
    <span class="token punctuation">(</span><span class="token punctuation">`</span>sid<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>cid<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>sel_date<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>score<span class="token punctuation">`</span><span class="token punctuation">)</span> 
<span class="token keyword">values</span> 
    <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token number">1111</span><span class="token punctuation">,</span> <span class="token string">'2017-09-01'</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token number">2222</span><span class="token punctuation">,</span> <span class="token string">'2017-09-01'</span><span class="token punctuation">,</span> <span class="token number">87.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token number">3333</span><span class="token punctuation">,</span> <span class="token string">'2017-09-01'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token number">4444</span><span class="token punctuation">,</span> <span class="token string">'2018-09-03'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">,</span> <span class="token string">'2017-09-02'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token number">1111</span><span class="token punctuation">,</span> <span class="token string">'2017-09-03'</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token number">5555</span><span class="token punctuation">,</span> <span class="token string">'2017-09-01'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1033</span><span class="token punctuation">,</span> <span class="token number">1111</span><span class="token punctuation">,</span> <span class="token string">'2017-09-03'</span><span class="token punctuation">,</span> <span class="token number">92.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1033</span><span class="token punctuation">,</span> <span class="token number">4444</span><span class="token punctuation">,</span> <span class="token string">'2017-09-01'</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1033</span><span class="token punctuation">,</span> <span class="token number">5555</span><span class="token punctuation">,</span> <span class="token string">'2017-09-01'</span><span class="token punctuation">,</span> <span class="token number">82.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1572</span><span class="token punctuation">,</span> <span class="token number">1111</span><span class="token punctuation">,</span> <span class="token string">'2017-09-02'</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1378</span><span class="token punctuation">,</span> <span class="token number">1111</span><span class="token punctuation">,</span> <span class="token string">'2017-09-05'</span><span class="token punctuation">,</span> <span class="token number">82</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">1378</span><span class="token punctuation">,</span> <span class="token number">7777</span><span class="token punctuation">,</span> <span class="token string">'2017-09-02'</span><span class="token punctuation">,</span> <span class="token number">65.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">2035</span><span class="token punctuation">,</span> <span class="token number">7777</span><span class="token punctuation">,</span> <span class="token string">'2018-09-03'</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">2035</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">,</span> <span class="token string">'2019-09-02'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">3755</span><span class="token punctuation">,</span> <span class="token number">1111</span><span class="token punctuation">,</span> <span class="token string">'2019-09-02'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">3755</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">,</span> <span class="token string">'2019-09-02'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">3755</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">,</span> <span class="token string">'2017-09-01'</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dql-数据查询语言"><a href="#dql-数据查询语言" class="header-anchor">#</a> DQL（数据查询语言）</h3> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询所有学生的所有信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_student<span class="token punctuation">;</span>
<span class="token keyword">select</span> stu_id<span class="token punctuation">,</span> stu_name<span class="token punctuation">,</span> stu_sex<span class="token punctuation">,</span> stu_birth<span class="token punctuation">,</span> stu_addr<span class="token punctuation">,</span> col_id <span class="token keyword">from</span> tb_student<span class="token punctuation">;</span>

<span class="token comment">-- 查询所有课程名称及学分(投影和别名)</span>
<span class="token keyword">select</span> cou_name <span class="token keyword">as</span> 课程名称<span class="token punctuation">,</span> cou_credit <span class="token keyword">as</span> 学分 <span class="token keyword">from</span> tb_course<span class="token punctuation">;</span>

<span class="token comment">-- 查询所有女学生的姓名和出生日期(筛选)</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_birth <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_sex<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询所有80后学生的姓名、性别和出生日期(筛选)</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_sex<span class="token punctuation">,</span> stu_birth <span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_birth<span class="token operator">&gt;=</span><span class="token string">'1980-1-1'</span> <span class="token operator">and</span> stu_birth<span class="token operator">&lt;=</span><span class="token string">'1989-12-31'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_sex<span class="token punctuation">,</span> stu_birth <span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_birth <span class="token operator">between</span> <span class="token string">'1980-1-1'</span> <span class="token operator">and</span> <span class="token string">'1989-12-31'</span><span class="token punctuation">;</span>

<span class="token comment">-- 补充1：在查询时可以对列的值进行处理</span>
<span class="token keyword">select</span> 
	stu_name <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span> 
    <span class="token keyword">case</span> stu_sex <span class="token keyword">when</span> <span class="token number">1</span> <span class="token keyword">then</span> <span class="token string">'男'</span> <span class="token keyword">else</span> <span class="token string">'女'</span> <span class="token keyword">end</span> <span class="token keyword">as</span> 性别<span class="token punctuation">,</span> 
    stu_birth <span class="token keyword">as</span> 生日
<span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_birth <span class="token operator">between</span> <span class="token string">'1980-1-1'</span> <span class="token operator">and</span> <span class="token string">'1989-12-31'</span><span class="token punctuation">;</span>

<span class="token comment">-- 补充2：MySQL方言(使用数据库特有的函数)</span>
<span class="token comment">-- 例如：Oracle中做同样事情的函数叫做decode</span>
<span class="token keyword">select</span> 
	stu_name <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span> 
    <span class="token keyword">if</span><span class="token punctuation">(</span>stu_sex<span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 性别<span class="token punctuation">,</span> 
    stu_birth <span class="token keyword">as</span> 生日
<span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_birth <span class="token operator">between</span> <span class="token string">'1980-1-1'</span> <span class="token operator">and</span> <span class="token string">'1989-12-31'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询所有80后女学生的姓名和出生日期</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_birth <span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_birth <span class="token operator">between</span> <span class="token string">'1980-1-1'</span> <span class="token operator">and</span> <span class="token string">'1989-12-31'</span> <span class="token operator">and</span> stu_sex<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询所有的80后学生或女学生的姓名和出生日期</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_birth <span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_birth <span class="token operator">between</span> <span class="token string">'1980-1-1'</span> <span class="token operator">and</span> <span class="token string">'1989-12-31'</span> <span class="token operator">or</span> stu_sex<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询姓“杨”的学生姓名和性别(模糊)</span>
<span class="token comment">-- 在SQL中通配符%可以匹配零个或任意多个字符</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_sex <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_name <span class="token operator">like</span> <span class="token string">'杨%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询姓“杨”名字两个字的学生姓名和性别(模糊)</span>
<span class="token comment">-- 在SQL中通配符_可以刚刚好匹配一个字符</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_sex <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_name <span class="token operator">like</span> <span class="token string">'杨_'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询姓“杨”名字三个字的学生姓名和性别(模糊)</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_sex <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_name <span class="token operator">like</span> <span class="token string">'杨__'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询名字中有“不”字或“嫣”字的学生的姓名(模糊)</span>
<span class="token comment">-- 提示：前面带%的模糊查询性能基本上都是非常糟糕的</span>
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_name <span class="token operator">like</span> <span class="token string">'%不%'</span> <span class="token operator">or</span> stu_name <span class="token operator">like</span> <span class="token string">'%嫣%'</span><span class="token punctuation">;</span>

<span class="token keyword">update</span> tb_student <span class="token keyword">set</span> stu_name<span class="token operator">=</span><span class="token string">'岳不嫣'</span> <span class="token keyword">where</span> stu_id<span class="token operator">=</span><span class="token number">1572</span><span class="token punctuation">;</span>

<span class="token comment">-- 并集运算</span>
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_name <span class="token operator">like</span> <span class="token string">'%不%'</span>
<span class="token keyword">union</span> 
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_name <span class="token operator">like</span> <span class="token string">'%嫣%'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_name <span class="token operator">like</span> <span class="token string">'%不%'</span>
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_name <span class="token operator">like</span> <span class="token string">'%嫣%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 正则表达式模糊查询</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_sex <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_name <span class="token operator">regexp</span> <span class="token string">'^杨.{2}$'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询没有录入家庭住址的学生姓名(空值)</span>
<span class="token comment">-- null作任何运算结果也是产生null，null相当于是条件不成立</span>
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_addr <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_addr<span class="token operator">&lt;=&gt;</span><span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询录入了家庭住址的学生姓名(空值)</span>
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_addr <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询学生选课的所有日期(去重)</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> sel_date <span class="token keyword">from</span> tb_record<span class="token punctuation">;</span>

<span class="token comment">-- 查询学生的家庭住址(去重)</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> stu_addr <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_addr <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询男学生的姓名和生日按年龄从大到小排列(排序)</span>
<span class="token comment">-- asc - 升序（从小到大），desc - 降序（从大到小）</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_birth <span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_sex<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">order</span> <span class="token keyword">by</span> stu_birth <span class="token keyword">asc</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> stu_birth <span class="token keyword">from</span> tb_student 
<span class="token keyword">where</span> stu_sex<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">order</span> <span class="token keyword">by</span> stu_birth <span class="token keyword">desc</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询年龄最大的学生的出生日期(聚合函数) ---&gt; 找出最小的生日</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>stu_birth<span class="token punctuation">)</span> <span class="token keyword">from</span> tb_student<span class="token punctuation">;</span>

<span class="token keyword">select</span> 
	<span class="token function">min</span><span class="token punctuation">(</span>stu_birth<span class="token punctuation">)</span> <span class="token keyword">as</span> 生日<span class="token punctuation">,</span>
    floor<span class="token punctuation">(</span>datediff<span class="token punctuation">(</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>stu_birth<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">365</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 年龄
<span class="token keyword">from</span> tb_student<span class="token punctuation">;</span>

<span class="token comment">-- 查询年龄最小的学生的出生日期(聚合函数)</span>
<span class="token keyword">select</span> 
	<span class="token function">max</span><span class="token punctuation">(</span>stu_birth<span class="token punctuation">)</span> <span class="token keyword">as</span> 生日<span class="token punctuation">,</span>
    floor<span class="token punctuation">(</span>datediff<span class="token punctuation">(</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>stu_birth<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">365</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 年龄
<span class="token keyword">from</span> tb_student<span class="token punctuation">;</span>

<span class="token comment">-- 查询所有考试的平均成绩</span>
<span class="token comment">-- 聚合函数在遇到null值会做忽略的处理</span>
<span class="token comment">-- 如果做计数操作，建议使用count(*)，这样才不会漏掉空值</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">from</span> tb_record<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">count</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">from</span> tb_record<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tb_record<span class="token punctuation">;</span>

<span class="token comment">-- 查询课程编号为1111的课程的平均成绩(筛选和聚合函数)</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">from</span> tb_record <span class="token keyword">where</span> cid<span class="token operator">=</span><span class="token number">1111</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询学号为1001的学生所有课程的平均分(筛选和聚合函数)</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">from</span> tb_record <span class="token keyword">where</span> sid<span class="token operator">=</span><span class="token number">1001</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> stu_addr<span class="token punctuation">)</span> <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_addr <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询男女学生的人数(分组和聚合函数) </span>
<span class="token comment">-- SAC（Split - Aggregate - Combine）</span>
<span class="token keyword">select</span> 
	<span class="token keyword">if</span><span class="token punctuation">(</span>stu_sex<span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 性别<span class="token punctuation">,</span> 
    <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 人数 
<span class="token keyword">from</span> tb_student <span class="token keyword">group</span> <span class="token keyword">by</span> stu_sex<span class="token punctuation">;</span>

<span class="token comment">-- 统计每个学院男女学生的人数</span>
<span class="token keyword">select</span> 
	col_id <span class="token keyword">as</span> 学院<span class="token punctuation">,</span> 
    <span class="token keyword">if</span><span class="token punctuation">(</span>stu_sex<span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 性别<span class="token punctuation">,</span> 
    <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 人数 
<span class="token keyword">from</span> tb_student <span class="token keyword">group</span> <span class="token keyword">by</span> col_id<span class="token punctuation">,</span> stu_sex<span class="token punctuation">;</span>

<span class="token comment">-- 查询每个学生的学号和平均成绩(分组和聚合函数)</span>
<span class="token keyword">select</span> 
	sid <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> 
    <span class="token function">round</span><span class="token punctuation">(</span><span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 平均分 
<span class="token keyword">from</span> tb_record <span class="token keyword">group</span> <span class="token keyword">by</span> sid<span class="token punctuation">;</span>


<span class="token comment">-- 查询平均成绩大于等于90分的学生的学号和平均成绩</span>
<span class="token comment">-- 分组以前的数据筛选使用where子句，分组以后的数据筛选使用having子句</span>
<span class="token keyword">select</span> 
	sid <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> 
    <span class="token function">round</span><span class="token punctuation">(</span><span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 平均分 
<span class="token keyword">from</span> tb_record 
<span class="token keyword">group</span> <span class="token keyword">by</span> sid <span class="token keyword">having</span> 平均分<span class="token operator">&gt;=</span><span class="token number">90</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询年龄最大的学生的姓名(子查询)</span>
<span class="token comment">-- 嵌套查询：把一个查询的结果作为另外一个查询的一部分来使用。</span>
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_birth<span class="token operator">=</span><span class="token punctuation">(</span>
	<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>stu_birth<span class="token punctuation">)</span> <span class="token keyword">from</span> tb_student
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询年龄最大的学生姓名和年龄(子查询+运算)</span>
<span class="token keyword">select</span> 
	stu_name <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span>
    floor<span class="token punctuation">(</span>datediff<span class="token punctuation">(</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stu_birth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">365</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 年龄 
<span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_birth<span class="token operator">=</span><span class="token punctuation">(</span>
	<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>stu_birth<span class="token punctuation">)</span> <span class="token keyword">from</span> tb_student
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询选了两门以上的课程的学生姓名(子查询/分组条件/集合运算)</span>
<span class="token keyword">select</span> stu_name <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stu_id <span class="token operator">in</span> <span class="token punctuation">(</span>
	<span class="token keyword">select</span> sid <span class="token keyword">from</span> tb_record <span class="token keyword">group</span> <span class="token keyword">by</span> sid <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询课程的名称、学分和授课老师的姓名(连接查询)</span>
<span class="token keyword">select</span> cou_name<span class="token punctuation">,</span> cou_credit<span class="token punctuation">,</span> tea_name 
<span class="token keyword">from</span> tb_course<span class="token punctuation">,</span> tb_teacher 
<span class="token keyword">where</span> tb_course<span class="token punctuation">.</span>tea_id<span class="token operator">=</span>tb_teacher<span class="token punctuation">.</span>tea_id<span class="token punctuation">;</span>

<span class="token keyword">select</span> cou_name<span class="token punctuation">,</span> cou_credit<span class="token punctuation">,</span> tea_name <span class="token keyword">from</span> tb_course t1 
<span class="token keyword">inner</span> <span class="token keyword">join</span> tb_teacher t2 <span class="token keyword">on</span> t1<span class="token punctuation">.</span>tea_id<span class="token operator">=</span>t2<span class="token punctuation">.</span>tea_id<span class="token punctuation">;</span>

<span class="token comment">-- 查询学生姓名、课程名称以及成绩(连接查询)</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> cou_name<span class="token punctuation">,</span> score 
<span class="token keyword">from</span> tb_record<span class="token punctuation">,</span> tb_student<span class="token punctuation">,</span> tb_course
<span class="token keyword">where</span> stu_id<span class="token operator">=</span>sid <span class="token operator">and</span> cou_id<span class="token operator">=</span>cid <span class="token operator">and</span> score <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> cou_name<span class="token punctuation">,</span> score <span class="token keyword">from</span> tb_student 
<span class="token keyword">inner</span> <span class="token keyword">join</span> tb_record <span class="token keyword">on</span> stu_id<span class="token operator">=</span>sid 
<span class="token keyword">inner</span> <span class="token keyword">join</span> tb_course <span class="token keyword">on</span> cou_id<span class="token operator">=</span>cid 
<span class="token keyword">where</span> score <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询选课学生的姓名和平均成绩(子查询和连接查询)</span>
<span class="token keyword">select</span> stu_name<span class="token punctuation">,</span> avg_score 
<span class="token keyword">from</span> tb_student<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sid<span class="token punctuation">,</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> avg_score 
	<span class="token keyword">from</span> tb_record <span class="token keyword">group</span> <span class="token keyword">by</span> sid
<span class="token punctuation">)</span> tb_temp <span class="token keyword">where</span> stu_id<span class="token operator">=</span>sid<span class="token punctuation">;</span>

<span class="token comment">-- 查询每个学生的姓名和选课数量(左外连接和子查询)</span>
<span class="token keyword">select</span> 
	stu_name <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span> 
    ifnull<span class="token punctuation">(</span>total<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 选课数量 
<span class="token keyword">from</span> tb_student <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> <span class="token punctuation">(</span>
	<span class="token keyword">select</span> sid<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> total <span class="token keyword">from</span> tb_record <span class="token keyword">group</span> <span class="token keyword">by</span> sid
<span class="token punctuation">)</span> tb_temp <span class="token keyword">on</span> stu_id<span class="token operator">=</span>sid<span class="token punctuation">;</span>
</code></pre></div><p>上面的DML有几个地方需要加以说明：</p> <ol><li><p>MySQL中支持多种类型的运算符，包括：算术运算符（+、-、*、/、%）、比较运算符（=、&lt;&gt;、&lt;=&gt;、&lt;、&lt;=、&gt;、&gt;=、BETWEEN...AND...、IN、IS NULL、IS NOT NULL、LIKE、RLIKE、REGEXP）、逻辑运算符（NOT、AND、OR、XOR）和位运算符（&amp;、|、^、~、&gt;&gt;、&lt;&lt;），我们可以在DML中使用这些运算符处理数据。</p></li> <li><p>在查询数据时，可以在SELECT语句及其子句（如WHERE子句、ORDER BY子句、HAVING子句等）中使用函数，这些函数包括字符串函数、数值函数、时间日期函数、流程函数等，如下面的表格所示。</p> <p>常用字符串函数。</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>CONCAT</td> <td>将多个字符串连接成一个字符串</td></tr> <tr><td>FORMAT</td> <td>将数值格式化成字符串并指定保留几位小数</td></tr> <tr><td>FROM_BASE64 / TO_BASE64</td> <td>BASE64解码/编码</td></tr> <tr><td>BIN / OCT / HEX</td> <td>将数值转换成二进制/八进制/十六进制字符串</td></tr> <tr><td>LOCATE</td> <td>在字符串中查找一个子串的位置</td></tr> <tr><td>LEFT / RIGHT</td> <td>返回一个字符串左边/右边指定长度的字符</td></tr> <tr><td>LENGTH / CHAR_LENGTH</td> <td>返回字符串的长度以字节/字符为单位</td></tr> <tr><td>LOWER / UPPER</td> <td>返回字符串的小写/大写形式</td></tr> <tr><td>LPAD / RPAD</td> <td>如果字符串的长度不足，在字符串左边/右边填充指定的字符</td></tr> <tr><td>LTRIM / RTRIM</td> <td>去掉字符串前面/后面的空格</td></tr> <tr><td>ORD / CHAR</td> <td>返回字符对应的编码/返回编码对应的字符</td></tr> <tr><td>STRCMP</td> <td>比较字符串，返回-1、0、1分别表示小于、等于、大于</td></tr> <tr><td>SUBSTRING</td> <td>返回字符串指定范围的子串</td></tr></tbody></table> <p>常用数值函数。</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>ABS</td> <td>返回一个数的绝度值</td></tr> <tr><td>CEILING / FLOOR</td> <td>返回一个数上取整/下取整的结果</td></tr> <tr><td>CONV</td> <td>将一个数从一种进制转换成另一种进制</td></tr> <tr><td>CRC32</td> <td>计算循环冗余校验码</td></tr> <tr><td>EXP / LOG / LOG2 / LOG10</td> <td>计算指数/对数</td></tr> <tr><td>POW</td> <td>求幂</td></tr> <tr><td>RAND</td> <td>返回[0,1)范围的随机数</td></tr> <tr><td>ROUND</td> <td>返回一个数四舍五入后的结果</td></tr> <tr><td>SQRT</td> <td>返回一个数的平方根</td></tr> <tr><td>TRUNCATE</td> <td>截断一个数到指定的精度</td></tr> <tr><td>SIN / COS / TAN / COT / ASIN / ACOS / ATAN</td> <td>三角函数</td></tr></tbody></table> <p>常用时间日期函数。</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>CURDATE / CURTIME / NOW</td> <td>获取当前日期/时间/日期和时间</td></tr> <tr><td>ADDDATE / SUBDATE</td> <td>将两个日期表达式相加/相减并返回结果</td></tr> <tr><td>DATE / TIME</td> <td>从字符串中获取日期/时间</td></tr> <tr><td>YEAR / MONTH / DAY</td> <td>从日期中获取年/月/日</td></tr> <tr><td>HOUR / MINUTE / SECOND</td> <td>从时间中获取时/分/秒</td></tr> <tr><td>DATEDIFF / TIMEDIFF</td> <td>返回两个时间日期表达式相差多少天/小时</td></tr> <tr><td>MAKEDATE / MAKETIME</td> <td>制造一个日期/时间</td></tr></tbody></table> <p>常用流程函数。</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>IF</td> <td>根据条件是否成立返回不同的值</td></tr> <tr><td>IFNULL</td> <td>如果为NULL则返回指定的值否则就返回本身</td></tr> <tr><td>NULLIF</td> <td>两个表达式相等就返回NULL否则返回第一个表达式的值</td></tr></tbody></table> <p>其他常用函数。</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>MD5 / SHA1 / SHA2</td> <td>返回字符串对应的哈希摘要</td></tr> <tr><td>CHARSET / COLLATION</td> <td>返回字符集/校对规则</td></tr> <tr><td>USER / CURRENT_USER</td> <td>返回当前用户</td></tr> <tr><td>DATABASE</td> <td>返回当前数据库名</td></tr> <tr><td>VERSION</td> <td>返回当前数据库版本</td></tr> <tr><td>FOUND_ROWS / ROW_COUNT</td> <td>返回查询到的行数/受影响的行数</td></tr> <tr><td>LAST_INSERT_ID</td> <td>返回最后一个自增主键的值</td></tr> <tr><td>UUID / UUID_SHORT</td> <td>返回全局唯一标识符</td></tr></tbody></table></li></ol> <h3 id="dcl-数据控制语言"><a href="#dcl-数据控制语言" class="header-anchor">#</a> DCL（数据控制语言）</h3> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token comment">-- 创建可以远程登录的root账号并为其指定口令</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>

<span class="token comment">-- 为远程登录的root账号授权操作所有数据库所有对象的所有权限并允许其将权限再次赋予其他用户</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建名为hellokitty的用户并为其指定口令</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'hellokitty'</span><span class="token variable">@'%'</span> identified <span class="token keyword">by</span> <span class="token string">'123123'</span><span class="token punctuation">;</span>

<span class="token comment">-- 将对school数据库所有对象的所有操作权限授予hellokitty</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> school<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'hellokitty'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 召回hellokitty对school数据库所有对象的insert/delete/update权限</span>
<span class="token keyword">revoke</span> <span class="token keyword">insert</span><span class="token punctuation">,</span> <span class="token keyword">delete</span><span class="token punctuation">,</span> <span class="token keyword">update</span> <span class="token keyword">on</span> school<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'hellokitty'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>说明：创建一个可以允许任意主机登录并且具有超级管理员权限的用户在现实中并不是一个明智的决定，因为一旦该账号的口令泄露或者被破解，数据库将会面临灾难级的风险。</p></blockquote> <h2 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h2> <p>索引是关系型数据库中用来提升查询性能最为重要的手段。关系型数据库中的索引就像一本书的目录，我们可以想象一下，如果要从一本书中找出某个知识点，但是这本书没有目录，这将是意见多么可怕的事情（我们估计得一篇一篇的翻下去，才能确定这个知识点到底在什么位置）。创建索引虽然会带来存储空间上的开销，就像一本书的目录会占用一部分的篇幅一样，但是在牺牲空间后换来的查询时间的减少也是非常显著的。</p> <p>MySQL中，所有数据类型的列都可以被索引，常用的存储引擎InnoDB和MyISAM能支持每个表创建16个索引。InnoDB和MyISAM使用的索引其底层算法是B-tree（B树），B-tree是一种自平衡的树，类似于平衡二叉排序树，能够保持数据有序。这种数据结构能够让查找数据、顺序访问、插入数据及删除的操作都在对数时间内完成。</p> <p>接下来我们通过一个简单的例子来说明索引的意义，比如我们要根据学生的姓名来查找学生，这个场景在实际开发中应该经常遇到，就跟通过商品名称查找商品道理是一样的。我们可以使用MySQL的<code>explain</code>关键字来查看SQL的执行计划。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stuname<span class="token operator">=</span><span class="token string">'林震南'</span>\G
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: tb_student
   partitions: NULL
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 11
     filtered: 10.00
        Extra: Using where
1 row in set, 1 warning (0.00 sec)
</code></pre></div><p>在上面的SQL执行计划中，有几项值得我们关注：</p> <ol><li><code>select_type</code>：查询的类型。
<ul><li>SIMPLE：简单SELECT，不需要使用UNION操作或子查询。</li> <li>PRIMARY：如果查询包含子查询，最外层的SELECT被标记为PRIMARY。</li> <li>UNION：UNION操作中第二个或后面的SELECT语句。</li> <li>SUBQUERY：子查询中的第一个SELECT。</li> <li>DERIVED：派生表的SELECT子查询。</li></ul></li> <li><code>table</code>：查询对应的表。</li> <li><code>type</code>：MySQL在表中找到满足条件的行的方式，也称为访问类型，包括：ALL（全表扫描）、index（索引全扫描，只遍历索引树）、range（索引范围扫描）、ref（非唯一索引扫描）、eq_ref（唯一索引扫描）、const/system（常量级查询）、NULL（不需要访问表或索引）。在所有的访问类型中，很显然ALL是性能最差的，它代表的全表扫描是指要扫描表中的每一行才能找到匹配的行。</li> <li><code>possible_keys</code>：MySQL可以选择的索引，但是<strong>有可能不会使用</strong>。</li> <li><code>key</code>：MySQL真正使用的索引，如果为NULL就表示没有使用索引。</li> <li><code>key_len</code>：使用的索引的长度，在不影响查询的情况下肯定是长度越短越好。</li> <li><code>rows</code>：执行查询需要扫描的行数，这是一个<strong>预估值</strong>。</li> <li><code>extra</code>：关于查询额外的信息。
<ul><li><code>Using filesort</code>：MySQL无法利用索引完成排序操作。</li> <li><code>Using index</code>：只使用索引的信息而不需要进一步查表来获取更多的信息。</li> <li><code>Using temporary</code>：MySQL需要使用临时表来存储结果集，常用于分组和排序。</li> <li><code>Impossible where</code>：<code>where</code>子句会导致没有符合条件的行。</li> <li><code>Distinct</code>：MySQL发现第一个匹配行后，停止为当前的行组合搜索更多的行。</li> <li><code>Using where</code>：查询的列未被索引覆盖，筛选条件并不是索引的前导列。</li></ul></li></ol> <p>从上面的执行计划可以看出，当我们通过学生名字查询学生时实际上是进行了全表扫描，不言而喻这个查询性能肯定是非常糟糕的，尤其是在表中的行很多的时候。如果我们需要经常通过学生姓名来查询学生，那么就应该在学生姓名对应的列上创建索引，通过索引来加速查询。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">index</span> idx_student_name <span class="token keyword">on</span> tb_student<span class="token punctuation">(</span>stuname<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>再次查看刚才的SQL对应的执行计划。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stuname<span class="token operator">=</span><span class="token string">'林震南'</span>\G
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: tb_student
   partitions: NULL
         type: ref
possible_keys: idx_student_name
          key: idx_student_name
      key_len: 62
          ref: const
         rows: 1
     filtered: 100.00
        Extra: NULL
1 row in set, 1 warning (0.00 sec)
</code></pre></div><p>可以注意到，在对学生姓名创建索引后，刚才的查询已经不是全表扫描而是基于索引的查询，而且扫描的行只有唯一的一行，这显然大大的提升了查询的性能。MySQL中还允许创建前缀索引，即对索引字段的前N个字符创建索引，这样的话可以减少索引占用的空间（但节省了空间很有可能会浪费时间，<strong>时间和空间是不可调和的矛盾</strong>），如下所示。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">index</span> idx_student_name_1 <span class="token keyword">on</span> tb_student<span class="token punctuation">(</span>stuname<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的索引相当于是根据学生姓名的第一个字来创建的索引，我们再看看SQL执行计划。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> stuname<span class="token operator">=</span><span class="token string">'林震南'</span>\G
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: tb_student
   partitions: NULL
         type: ref
possible_keys: idx_student_name
          key: idx_student_name
      key_len: 5
          ref: const
         rows: 2
     filtered: 100.00
        Extra: Using where
1 row in set, 1 warning (0.00 sec)
</code></pre></div><p>不知道大家是否注意到，这一次扫描的行变成了2行，因为学生表中有两个姓“林”的学生，我们只用姓名的第一个字作为索引的话，在查询时通过索引就会找到这两行。</p> <p>如果要删除索引，可以使用下面的SQL。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> tb_student <span class="token keyword">drop</span> <span class="token keyword">index</span> idx_student_name<span class="token punctuation">;</span>
</code></pre></div><p>或者</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">index</span> idx_student_name <span class="token keyword">on</span> tb_student<span class="token punctuation">;</span>
</code></pre></div><p>我们简单的为大家总结一下索引的设计原则：</p> <ol><li><strong>最适合</strong>索引的列是出现在<strong>WHERE子句</strong>和连接子句中的列。</li> <li>索引列的基数越大（取值多重复值少），索引的效果就越好。</li> <li>使用<strong>前缀索引</strong>可以减少索引占用的空间，内存中可以缓存更多的索引。</li> <li><strong>索引不是越多越好</strong>，虽然索引加速了读操作（查询），但是写操作（增、删、改）都会变得更慢，因为数据的变化会导致索引的更新，就如同书籍章节的增删需要更新目录一样。</li> <li>使用InnoDB存储引擎时，表的普通索引都会保存主键的值，所以<strong>主键要尽可能选择较短的数据类型</strong>，这样可以有效的减少索引占用的空间，利用提升索引的缓存效果。</li></ol> <p>最后，还有一点需要说明，InnoDB使用的B-tree索引，数值类型的列除了等值判断时索引会生效之外，使用&gt;、&lt;、&gt;=、&lt;=、BETWEEN...AND... 、&lt;&gt;时，索引仍然生效；对于字符串类型的列，如果使用不以通配符开头的模糊查询，索引也是起作用的，但是其他的情况会导致索引失效，这就意味着很有可能会做全表查询。</p> <h2 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h2> <p>视图是关系型数据库中将一组查询指令构成的结果集组合成可查询的数据表的对象。简单的说，视图就是虚拟的表，但与数据表不同的是，数据表是一种实体结构，而视图是一种虚拟结构，你也可以将视图理解为保存在数据库中被赋予名字的SQL语句。</p> <p>使用视图可以获得以下好处：</p> <ol><li>可以将实体数据表隐藏起来，让外部程序无法得知实际的数据结构，让访问者可以使用表的组成部分而不是整个表，降低数据库被攻击的风险。</li> <li>在大多数的情况下视图是只读的（更新视图的操作通常都有诸多的限制），外部程序无法直接透过视图修改数据。</li> <li>重用SQL语句，将高度复杂的查询包装在视图表中，直接访问该视图即可取出需要的数据；也可以将视图视为数据表进行连接查询。</li> <li>视图可以返回与实体数据表不同格式的数据，</li></ol> <p>创建视图。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">view</span> vw_avg_score 
<span class="token keyword">as</span> 
    <span class="token keyword">select</span> sid<span class="token punctuation">,</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> avgscore 
    <span class="token keyword">from</span> tb_record <span class="token keyword">group</span> <span class="token keyword">by</span> sid<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">view</span> vw_student_score 
<span class="token keyword">as</span> 
    <span class="token keyword">select</span> stuname<span class="token punctuation">,</span> avgscore 
    <span class="token keyword">from</span> tb_student<span class="token punctuation">,</span> vw_avg_score 
    <span class="token keyword">where</span> stuid<span class="token operator">=</span>sid<span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>提示</strong>：因为视图不包含数据，所以每次使用视图时，都必须执行查询以获得数据，如果你使用了连接查询、嵌套查询创建了较为复杂的视图，你可能会发现查询性能下降得很厉害。因此，在使用复杂的视图前，应该进行测试以确保其性能能够满足应用的需求。</p></blockquote> <p>使用视图。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> stuname<span class="token punctuation">,</span> avgscore <span class="token keyword">from</span> vw_student_score <span class="token keyword">order</span> <span class="token keyword">by</span> avgscore <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>+--------------+----------+
| stuname      | avgscore |
+--------------+----------+
| 杨过         |     95.6 |
| 任我行       |     53.5 |
| 王语嫣       |     84.3 |
| 纪嫣然       |     73.8 |
| 岳不群       |     78.0 |
| 东方不败     |     88.0 |
| 项少龙       |     92.0 |
+--------------+----------+
</code></pre></div><p>既然视图是一张虚拟的表，那么视图的中的数据可以更新吗？视图的可更新性要视具体情况而定，以下类型的视图是不能更新的：</p> <ol><li>使用了聚合函数（SUM、MIN、MAX、AVG、COUNT等）、DISTINCT、GROUP BY、HAVING、UNION或者UNION ALL的视图。</li> <li>SELECT中包含了子查询的视图。</li> <li>FROM子句中包含了一个不能更新的视图的视图。</li> <li>WHERE子句的子查询引用了FROM子句中的表的视图。</li></ol> <p>删除视图。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">view</span> vw_student_score<span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>说明</strong>：如果希望更新视图，可以先用上面的命令删除视图，也可以通过<code>create or replace view</code>来更新视图。</p></blockquote> <p>视图的规则和限制。</p> <ol><li>视图可以嵌套，可以利用从其他视图中检索的数据来构造一个新的视图。视图也可以和表一起使用。</li> <li>创建视图时可以使用<code>order by</code>子句，但如果从视图中检索数据时也使用了<code>order by</code>，那么该视图中原先的<code>order by</code>会被覆盖。</li> <li>视图无法使用索引，也不会激发触发器（实际开发中因为性能等各方面的考虑，通常不建议使用触发器，所以我们也不对这个概念进行介绍）的执行。</li></ol> <h2 id="过程"><a href="#过程" class="header-anchor">#</a> 过程</h2> <p>过程（又称存储过程）是事先编译好存储在数据库中的一组SQL的集合，调用过程可以简化应用程序开发人员的工作，减少与数据库服务器之间的通信，对于提升数据操作的性能也是有帮助的。其实迄今为止，我们使用的SQL语句都是针对一个或多个表的单条语句，但在实际开发中经常会遇到某个操作需要多条SQL语句才能完成的情况。例如，电商网站在受理用户订单时，需要做以下一系列的处理。</p> <ol><li>通过查询来核对库存中是否有对应的物品以及库存是否充足。</li> <li>如果库存有物品，需要锁定库存以确保这些物品不再卖给别人， 并且要减少可用的物品数量以反映正确的库存量。</li> <li>如果库存不足，可能需要进一步与供应商进行交互或者至少产生一条系统提示消息。</li> <li>不管受理订单是否成功，都需要产生流水记录，而且需要给对应的用户产生一条通知信息。</li></ol> <p>我们可以通过过程将复杂的操作封装起来，这样不仅有助于保证数据的一致性，而且将来如果业务发生了变动，只需要调整和修改过程即可。对于调用过程的用户来说，过程并没有暴露数据表的细节，而且执行过程比一条条的执行一组SQL要快得多。</p> <p>下面的过程实现了查询某门课程的最高分、最低分和平均分。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">procedure</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> sp_score_by_cid<span class="token punctuation">;</span>

<span class="token keyword">delimiter</span> $$

<span class="token keyword">create</span> <span class="token keyword">procedure</span> sp_score_by_cid<span class="token punctuation">(</span>
	courseId <span class="token keyword">int</span><span class="token punctuation">,</span> 
	<span class="token keyword">out</span> maxScore <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token keyword">out</span> minScore <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">out</span> avgScore <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">begin</span>
	<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">into</span> maxScore <span class="token keyword">from</span> tb_record 
		<span class="token keyword">where</span> cid<span class="token operator">=</span>courseId<span class="token punctuation">;</span>
	<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">into</span> minScore <span class="token keyword">from</span> tb_record 
		<span class="token keyword">where</span> cid<span class="token operator">=</span>courseId<span class="token punctuation">;</span>
	<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">into</span> avgScore <span class="token keyword">from</span> tb_record 
		<span class="token keyword">where</span> cid<span class="token operator">=</span>courseId<span class="token punctuation">;</span>
<span class="token keyword">end</span> $$

<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>

<span class="token keyword">call</span> sp_score_by_cid<span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">,</span> <span class="token variable">@a</span><span class="token punctuation">,</span> <span class="token variable">@b</span><span class="token punctuation">,</span> <span class="token variable">@c</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@a</span><span class="token punctuation">,</span> <span class="token variable">@b</span><span class="token punctuation">,</span> <span class="token variable">@c</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>说明</strong>：在定义过程时，因为可能需要书写多条SQL，而分隔这些SQL需要使用分号作为分隔符，如果这个时候，仍然用分号表示整段代码结束，那么定义过程的SQL就会出现错误，所以上面我们用<code>delimiter $$</code>将整段代码结束的标记定义为<code>$$</code>，那么代码中的分号将不再表示整段代码的结束，整段代码只会在遇到<code>end $$</code>时才会执行。在定义完过程后，通过<code>delimiter ;</code>将结束符重新改回成分号（恢复现场）。</p></blockquote> <p>上面定义的过程有四个参数，其中第一个参数是输入参数，代表课程的编号，后面的参数都是输出参数，因为过程不能定义返回值，只能通过输出参数将执行结果带出，定义输出参数的关键字是<code>out</code>，默认情况下参数都是输入参数。</p> <p>调用过程。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">call</span> sp_score_by_cid<span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">,</span> <span class="token variable">@a</span><span class="token punctuation">,</span> <span class="token variable">@b</span><span class="token punctuation">,</span> <span class="token variable">@c</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>获取输出参数的值。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token variable">@a</span> <span class="token keyword">as</span> 最高分<span class="token punctuation">,</span> <span class="token variable">@b</span> <span class="token keyword">as</span> 最低分<span class="token punctuation">,</span> <span class="token variable">@c</span> <span class="token keyword">as</span> 平均分<span class="token punctuation">;</span>
</code></pre></div><p>删除过程。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">procedure</span> sp_score_by_cid<span class="token punctuation">;</span>
</code></pre></div><p>在过程中，我们可以定义变量、条件，可以使用分支和循环语句，可以通过游标操作查询结果，还可以使用事件调度器，这些内容我们暂时不在此处进行介绍。虽然我们说了很多过程的好处，但是在实际开发中，如果过度的使用过程并将大量复杂的运算放到过程中，必然会导致占用数据库服务器的CPU资源，造成数据库服务器承受巨大的压力。为此，我们一般会将复杂的运算和处理交给应用服务器，因为很容易部署多台应用服务器来分摊这些压力。</p> <h2 id="mysql8窗口函数"><a href="#mysql8窗口函数" class="header-anchor">#</a> MySQL8窗口函数</h2> <p>MySQL从8.0开始支持窗口函数，大多数商业数据库和一些开源数据库早已提供了对窗口函数的支持，有的也将其称之为OLAP（联机分析和处理）函数，听名字就知道跟统计和分析相关。为了帮助大家理解窗口函数，我们先说说窗口的概念。</p> <p>窗口可以理解为记录的集合，窗口函数也就是在满足某种条件的记录集合上执行的特殊函数，对于每条记录都要在此窗口内执行函数。窗口函数和我们上面讲到的聚合函数比较容易混淆，二者的区别主要在于聚合函数是将多条记录聚合为一条记录，窗口函数是每条记录都会执行，执行后记录条数不会变。窗口函数不仅仅是几个函数，它是一套完整的语法，函数只是该语法的一部分，基本语法如下所示：</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token operator">&lt;</span>窗口函数<span class="token operator">&gt;</span> <span class="token keyword">over</span> <span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> <span class="token operator">&lt;</span>用于分组的列名<span class="token operator">&gt;</span> <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token operator">&lt;</span>用户排序的列名<span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre></div><p>上面语法中，窗口函数的位置可以放以下两种函数：</p> <ol><li>专用窗口函数，包括：<code>rank</code>、<code>dense_rank</code>和<code>row_number</code>等。</li> <li>聚合函数，包括：<code>sum</code>、<code>avg</code>、<code>max</code>、<code>min</code>和<code>count</code>等。</li></ol> <blockquote><p><strong>参考链接</strong>：<a href="https://zhuanlan.zhihu.com/p/92654574" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/92654574<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></blockquote> <h2 id="其他内容"><a href="#其他内容" class="header-anchor">#</a> 其他内容</h2> <h3 id="范式理论"><a href="#范式理论" class="header-anchor">#</a> 范式理论</h3> <p>范式理论是设计关系型数据库中二维表的指导思想。</p> <ol><li>第一范式：数据表的每个列的值域都是由原子值组成的，不能够再分割。</li> <li>第二范式：数据表里的所有数据都要和该数据表的键（主键与候选键）有完全依赖关系。</li> <li>第三范式：所有非键属性都只和候选键有相关性，也就是说非键属性之间应该是独立无关的。</li></ol> <h3 id="数据完整性"><a href="#数据完整性" class="header-anchor">#</a> 数据完整性</h3> <ol><li><p>实体完整性 - 每个实体都是独一无二的</p> <ul><li>主键（primary key） / 唯一约束 / 唯一索引（unique）</li></ul></li> <li><p>引用完整性（参照完整性）- 关系中不允许引用不存在的实体</p> <ul><li>外键（foreign key）</li></ul></li> <li><p>域完整性 - 数据是有效的</p> <ul><li><p>数据类型及长度</p></li> <li><p>非空约束（not null）</p></li> <li><p>默认值约束（default）</p></li> <li><p>检查约束（check）</p> <blockquote><p><strong>说明</strong>：在MySQL数据库中，检查约束并不起作用。</p></blockquote></li></ul></li></ol> <h3 id="数据一致性"><a href="#数据一致性" class="header-anchor">#</a> 数据一致性</h3> <ol><li><p>事务：一系列对数据库进行读/写的操作，这些操作要么全都成功，要么全都失败。</p></li> <li><p>事务的ACID特性</p> <ul><li>原子性：事务作为一个整体被执行，包含在其中的对数据库的操作要么全部被执行，要么都不执行</li> <li>一致性：事务应确保数据库的状态从一个一致状态转变为另一个一致状态</li> <li>隔离性：多个事务并发执行时，一个事务的执行不应影响其他事务的执行</li> <li>持久性：已被提交的事务对数据库的修改应该永久保存在数据库中</li></ul></li> <li><p>MySQL中的事务操作</p> <ul><li><p>开启事务环境</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">start</span> <span class="token keyword">transaction</span>
</code></pre></div><p>或</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">begin</span>
</code></pre></div></li> <li><p>提交事务</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">commit</span>
</code></pre></div></li> <li><p>回滚事务</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">rollback</span>
</code></pre></div></li></ul></li></ol> <p>大家应该能够想到，关于MySQL的知识肯定远远不止上面列出的这些，比如MySQL的性能优化、管理和维护MySQL的相关工具、MySQL数据的备份和恢复、监控MySQL、部署高可用架构等问题我们在这里都没有进行讨论。当然，这些内容也都是跟项目开发密切相关的，我们就留到有需要的时候再进行讲解。</p> <h2 id="python数据库编程"><a href="#python数据库编程" class="header-anchor">#</a> Python数据库编程</h2> <p>我们用如下所示的数据库来演示在Python中如何访问MySQL数据库。</p> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> hrs<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> hrs <span class="token keyword">default</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span>

<span class="token keyword">use</span> hrs<span class="token punctuation">;</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> tb_emp<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> tb_dept<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> tb_dept
<span class="token punctuation">(</span>
dno   <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'编号'</span><span class="token punctuation">,</span>
dname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'名称'</span><span class="token punctuation">,</span>
dloc  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'所在地'</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>dno<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> tb_dept <span class="token keyword">values</span> 
	<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'会计部'</span><span class="token punctuation">,</span> <span class="token string">'北京'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'研发部'</span><span class="token punctuation">,</span> <span class="token string">'成都'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">'销售部'</span><span class="token punctuation">,</span> <span class="token string">'重庆'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token string">'运维部'</span><span class="token punctuation">,</span> <span class="token string">'深圳'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> tb_emp
<span class="token punctuation">(</span>
eno   <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'员工编号'</span><span class="token punctuation">,</span>
ename <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'员工姓名'</span><span class="token punctuation">,</span>
job   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'员工职位'</span><span class="token punctuation">,</span>
mgr   <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'主管编号'</span><span class="token punctuation">,</span>
sal   <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'员工月薪'</span><span class="token punctuation">,</span>
comm  <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'每月补贴'</span><span class="token punctuation">,</span>
dno   <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'所在部门编号'</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>eno<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> tb_emp <span class="token keyword">add</span> <span class="token keyword">constraint</span> fk_emp_dno <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>dno<span class="token punctuation">)</span> <span class="token keyword">references</span> tb_dept <span class="token punctuation">(</span>dno<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> tb_emp <span class="token keyword">values</span> 
	<span class="token punctuation">(</span><span class="token number">7800</span><span class="token punctuation">,</span> <span class="token string">'张三丰'</span><span class="token punctuation">,</span> <span class="token string">'总裁'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token number">1200</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">2056</span><span class="token punctuation">,</span> <span class="token string">'乔峰'</span><span class="token punctuation">,</span> <span class="token string">'分析师'</span><span class="token punctuation">,</span> <span class="token number">7800</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3088</span><span class="token punctuation">,</span> <span class="token string">'李莫愁'</span><span class="token punctuation">,</span> <span class="token string">'设计师'</span><span class="token punctuation">,</span> <span class="token number">2056</span><span class="token punctuation">,</span> <span class="token number">3500</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3211</span><span class="token punctuation">,</span> <span class="token string">'张无忌'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">2056</span><span class="token punctuation">,</span> <span class="token number">3200</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3233</span><span class="token punctuation">,</span> <span class="token string">'丘处机'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">2056</span><span class="token punctuation">,</span> <span class="token number">3400</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3251</span><span class="token punctuation">,</span> <span class="token string">'张翠山'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">2056</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">5566</span><span class="token punctuation">,</span> <span class="token string">'宋远桥'</span><span class="token punctuation">,</span> <span class="token string">'会计师'</span><span class="token punctuation">,</span> <span class="token number">7800</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">5234</span><span class="token punctuation">,</span> <span class="token string">'郭靖'</span><span class="token punctuation">,</span> <span class="token string">'出纳'</span><span class="token punctuation">,</span> <span class="token number">5566</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3344</span><span class="token punctuation">,</span> <span class="token string">'黄蓉'</span><span class="token punctuation">,</span> <span class="token string">'销售主管'</span><span class="token punctuation">,</span> <span class="token number">7800</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">1359</span><span class="token punctuation">,</span> <span class="token string">'胡一刀'</span><span class="token punctuation">,</span> <span class="token string">'销售员'</span><span class="token punctuation">,</span> <span class="token number">3344</span><span class="token punctuation">,</span> <span class="token number">1800</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">4466</span><span class="token punctuation">,</span> <span class="token string">'苗人凤'</span><span class="token punctuation">,</span> <span class="token string">'销售员'</span><span class="token punctuation">,</span> <span class="token number">3344</span><span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3244</span><span class="token punctuation">,</span> <span class="token string">'欧阳锋'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">3088</span><span class="token punctuation">,</span> <span class="token number">3200</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3577</span><span class="token punctuation">,</span> <span class="token string">'杨过'</span><span class="token punctuation">,</span> <span class="token string">'会计'</span><span class="token punctuation">,</span> <span class="token number">5566</span><span class="token punctuation">,</span> <span class="token number">2200</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3588</span><span class="token punctuation">,</span> <span class="token string">'朱九真'</span><span class="token punctuation">,</span> <span class="token string">'会计'</span><span class="token punctuation">,</span> <span class="token number">5566</span><span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在Python 3中，我们通常使用纯Python的三方库PyMySQL来访问MySQL数据库，它应该是目前Python操作MySQL数据库最好的选择。</p> <ol><li><p>安装PyMySQL。</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>pip <span class="token function">install</span> pymysql
</code></pre></div></li> <li><p>添加一个部门。</p> <div class="language-Python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pymysql


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    no <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'编号: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    name <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'名字: '</span><span class="token punctuation">)</span>
    loc <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'所在地: '</span><span class="token punctuation">)</span>
    <span class="token comment"># 1. 创建数据库连接对象</span>
    con <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>
                          database<span class="token operator">=</span><span class="token string">'hrs'</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span>
                          user<span class="token operator">=</span><span class="token string">'yourname'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'yourpass'</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 2. 通过连接对象获取游标</span>
        <span class="token keyword">with</span> con<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
            <span class="token comment"># 3. 通过游标执行SQL并获得执行结果</span>
            result <span class="token operator">=</span> cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
                <span class="token string">'insert into tb_dept values (%s, %s, %s)'</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span>no<span class="token punctuation">,</span> name<span class="token punctuation">,</span> loc<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token keyword">if</span> result <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'添加成功!'</span><span class="token punctuation">)</span>
        <span class="token comment"># 4. 操作成功提交事务</span>
        con<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        <span class="token comment"># 5. 关闭连接释放资源</span>
        con<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>删除一个部门。</p> <div class="language-Python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pymysql


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    no <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'编号: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    con <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>
                          database<span class="token operator">=</span><span class="token string">'hrs'</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span>
                          user<span class="token operator">=</span><span class="token string">'yourname'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'yourpass'</span><span class="token punctuation">,</span>
                          autocommit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> con<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
            result <span class="token operator">=</span> cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
                <span class="token string">'delete from tb_dept where dno=%s'</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span>no<span class="token punctuation">,</span> <span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token keyword">if</span> result <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'删除成功!'</span><span class="token punctuation">)</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        con<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>说明：如果不希望每次SQL操作之后手动提交或回滚事务，可以像上面的代码那样，在创建连接的时候多加一个名为<code>autocommit</code>的参数并将它的值设置为<code>True</code>，表示每次执行SQL之后自动提交。如果程序中不需要使用事务环境也不希望手动的提交或回滚就可以这么做。</p></blockquote></li> <li><p>更新一个部门。</p> <div class="language-Python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pymysql


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    no <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'编号: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    name <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'名字: '</span><span class="token punctuation">)</span>
    loc <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'所在地: '</span><span class="token punctuation">)</span>
    con <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>
                          database<span class="token operator">=</span><span class="token string">'hrs'</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span>
                          user<span class="token operator">=</span><span class="token string">'yourname'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'yourpass'</span><span class="token punctuation">,</span>
                          autocommit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> con<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
            result <span class="token operator">=</span> cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
                <span class="token string">'update tb_dept set dname=%s, dloc=%s where dno=%s'</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span>name<span class="token punctuation">,</span> loc<span class="token punctuation">,</span> no<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token keyword">if</span> result <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'更新成功!'</span><span class="token punctuation">)</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        con<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>查询所有部门。</p> <div class="language-Python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pymysql
<span class="token keyword">from</span> pymysql<span class="token punctuation">.</span>cursors <span class="token keyword">import</span> DictCursor


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    con <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>
                          database<span class="token operator">=</span><span class="token string">'hrs'</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span>
                          user<span class="token operator">=</span><span class="token string">'yourname'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'yourpass'</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> con<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span>cursor<span class="token operator">=</span>DictCursor<span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'select dno as no, dname as name, dloc as loc from tb_dept'</span><span class="token punctuation">)</span>
            results <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'编号\t名称\t\t所在地'</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> dept <span class="token keyword">in</span> results<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span>dept<span class="token punctuation">[</span><span class="token string">'no'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span>dept<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span>dept<span class="token punctuation">[</span><span class="token string">'loc'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        con<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>分页查询员工信息。</p> <div class="language-Python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pymysql
<span class="token keyword">from</span> pymysql<span class="token punctuation">.</span>cursors <span class="token keyword">import</span> DictCursor


<span class="token keyword">class</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> no<span class="token punctuation">,</span> name<span class="token punctuation">,</span> job<span class="token punctuation">,</span> sal<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>no <span class="token operator">=</span> no
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>job <span class="token operator">=</span> job
        self<span class="token punctuation">.</span>sal <span class="token operator">=</span> sal

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f'\n编号：</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>no<span class="token punctuation">}</span></span><span class="token string">\n姓名：</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">\n职位：</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>job<span class="token punctuation">}</span></span><span class="token string">\n月薪：</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>sal<span class="token punctuation">}</span></span><span class="token string">\n'</span></span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    page <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'页码: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    size <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'大小: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    con <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>
                          database<span class="token operator">=</span><span class="token string">'hrs'</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span>
                          user<span class="token operator">=</span><span class="token string">'yourname'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'yourpass'</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> con<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
                <span class="token string">'select eno as no, ename as name, job, sal from tb_emp limit %s,%s'</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">,</span> size<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
            <span class="token keyword">for</span> emp_tuple <span class="token keyword">in</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                emp <span class="token operator">=</span> Emp<span class="token punctuation">(</span><span class="token operator">*</span>emp_tuple<span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        con<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ol></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/11/01, 00:46:37</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/ee25df/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Python语言进阶</div></a> <a href="/pages/e7adb0/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">NoSQL数据库入门</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/ee25df/" class="prev">Python语言进阶</a></span> <span class="next"><a href="/pages/e7adb0/">NoSQL数据库入门</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/610238/"><div>浏览器模型(四)</div></a> <span>12-12</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/229568/"><div>浏览器模型(一)</div></a> <span>12-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/ffb0a1/"><div>浏览器模型(二)</div></a> <span>12-11</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1390128154@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wuKongNotNull" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2022
    <span>悟空非空也 | <a href="https://github.com/WuKongNotNull/wukong-post/blob/main/LICENSE" target="_blank">Apache License 2.0</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0772105c.js" defer></script><script src="/assets/js/2.6497fd29.js" defer></script><script src="/assets/js/154.d0b70cd8.js" defer></script>
  </body>
</html>